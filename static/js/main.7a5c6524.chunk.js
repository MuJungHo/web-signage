(this["webpackJsonpweb-signage"]=this["webpackJsonpweb-signage"]||[]).push([[0],{151:function(t,e,n){},152:function(t,e,n){"use strict";n.r(e);n(89);var a=n(0),i=n.n(a),r=n(20),o=n(19),c=n(6),l=function(t){var e=t.cx,n=t.cy,a=t.board,r=t.position,c=(t.layer,t.offset),l=i.a.useState(!1),s=Object(o.a)(l,2),u=s[0],f=s[1],h=function(){a.current.removeEventListener("mousemove",d),u&&f(!1)},d=function(t){c({position:r,x:t.offsetX-e,y:t.offsetY-n})};return i.a.createElement("circle",{onMouseDown:function(){f(!0),a.current.addEventListener("mousemove",d),a.current.addEventListener("mouseup",h)},cx:e,cy:n,r:"4",stroke:"#1592E6",fill:"#FFFFFF"})},s=function(t){var e=t.x1,n=t.y1,a=t.x2,r=t.y2,o=t.show;return i.a.createElement("line",{x1:e,y1:n,x2:a,y2:r,style:{stroke:"#90EE90",strokeWidth:o?1:0}})},u=function(t){var e=t.layer,n=t.board,a=t.setLayers,r=t.layers,u=t.activeLayer,f=t.setActiveLayer,h=i.a.useState(null),d=Object(o.a)(h,2),m=d[0],p=d[1],y=r.filter((function(t){return t.id!==e.id})).map((function(t){return t.top})),g=r.filter((function(t){return t.id!==e.id})).map((function(t){return t.top+t.height})),b=r.filter((function(t){return t.id!==e.id})).map((function(t){return t.left})),w=r.filter((function(t){return t.id!==e.id})).map((function(t){return t.left+t.width})),v=y.concat(g),E=b.concat(w);i.a.useEffect((function(){JSON.stringify(m)!==JSON.stringify({})&&null!==m&&(n.current.addEventListener("mousemove",M),n.current.addEventListener("mouseup",L))}),[m]);var x=function(t){a(r.map((function(e){return e.id===t.id?Object(c.a)({},t):Object(c.a)({},e)})))},O=function(t){var n=t.position,a=t.x,i=t.y;"left-top"===n&&x(Object(c.a)(Object(c.a)({},e),{},{left:e.left+a,top:e.top+i,width:e.width-a,height:e.height-i})),"right-top"===n&&x(Object(c.a)(Object(c.a)({},e),{},{top:e.top+i,width:e.width+a,height:e.height-i})),"left-bottom"===n&&x(Object(c.a)(Object(c.a)({},e),{},{left:e.left+a,width:e.width-a,height:e.height+i})),"right-bottom"===n&&x(Object(c.a)(Object(c.a)({},e),{},{width:e.width+a,height:e.height+i}))},j=function(t){p({left:t.clientX,top:t.clientY})},L=function(){p({}),n.current.removeEventListener("mousemove",M)},M=function(t){var n=e.left+t.x-m.left,a=e.top+t.y-m.top,i=e.left+t.x-m.left+e.width,r=e.top+t.y-m.top+e.height;n<0&&(n=0),a<0&&(a=0),i>960&&(n=960-e.width),r>540&&(a=540-e.height),E.some((function(t){return Math.abs(t-n)<10}))&&(n=E.find((function(t){return Math.abs(t-n)<10}))),v.some((function(t){return Math.abs(t-a)<10}))&&(a=v.find((function(t){return Math.abs(t-a)<10}))),E.some((function(t){return Math.abs(t-i)<10}))&&(n=E.find((function(t){return Math.abs(t-i)<10}))-e.width),v.some((function(t){return Math.abs(t-r)<10}))&&(a=v.find((function(t){return Math.abs(t-r)<10}))-e.height),x(Object(c.a)(Object(c.a)({},e),{},{left:n,top:a}))},k=function(t){return"top"===t?v.some((function(t){return Math.abs(t-e.top)<10})):"bottom"===t?v.some((function(t){return Math.abs(t-e.top-e.height)<10})):"left"===t?E.some((function(t){return Math.abs(t-e.left)<10})):"right"===t?E.some((function(t){return Math.abs(t-e.left-e.width)<10})):void 0};return i.a.createElement("g",{onFocus:function(){return f(Object(c.a)({},e))},style:{outline:"none"},tabIndex:"-1"},i.a.createElement("rect",{style:{fill:"white",stroke:"red",strokeWidth:1,fillOpacity:".5"},x:e.left,y:e.top,width:e.width,height:e.height,onMouseDown:j}),i.a.createElement("image",{xlinkHref:{image:"../assets/images/".concat(e.data.id,".jpg"),video:"../assets/previews/".concat(e.data.id,".jpg")}[e.data.type],x:e.left,y:e.top,width:e.width,height:e.height,onMouseDown:j}),e.id===u.id&&i.a.createElement(i.a.Fragment,null,i.a.createElement(l,{position:"left-top",board:n,cx:e.left,cy:e.top,layer:e,offset:O}),i.a.createElement(l,{position:"right-top",board:n,cx:e.left+e.width,cy:e.top,layer:e,offset:O}),i.a.createElement(l,{position:"left-bottom",board:n,cx:e.left,cy:e.top+e.height,layer:e,offset:O}),i.a.createElement(l,{position:"right-bottom",board:n,cx:e.left+e.width,cy:e.top+e.height,layer:e,offset:O}),i.a.createElement(s,{x1:e.left-100,y1:e.top,x2:e.left+e.width+100,y2:e.top,show:k("top")}),i.a.createElement(s,{x1:e.left-100,y1:e.top+e.height,x2:e.left+e.width+100,y2:e.top+e.height,show:k("bottom")}),i.a.createElement(s,{x1:e.left,y1:e.top-100,x2:e.left,y2:e.top+e.height+100,show:k("left")}),i.a.createElement(s,{x1:e.left+e.width,y1:e.top-100,x2:e.left+e.width,y2:e.top+e.height+100,show:k("right")})))},f=function(t){var e=t.layers,n=t.setLayers,a=t.activeLayer,r=t.setActiveLayer,o=i.a.useRef();return i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"960",height:"540",ref:o,style:{marginTop:20}},i.a.createElement("rect",{width:"960",height:"540",x:"0",y:"0",fill:"#f5f5f5"}),e.map((function(t){return i.a.createElement(u,{activeLayer:a,setActiveLayer:r,key:t.id,layer:t,layers:e,setLayers:n,board:o})})))},h=n(30),d=n(168),m=n(169),p=n(82),y=n.n(p),g=n(83),b=n.n(g),w=n(85),v=n.n(w),E=n(84),x=n.n(E),O=n(41),j=n.n(O),L=function(t){var e=t.layers,n=t.setLayers,a=t.activeLayer,r=t.setActiveLayer;return i.a.createElement(d.a,null,i.a.createElement(m.a,{color:"primary",component:"span",onClick:function(){return n([].concat(Object(h.a)(e),[{id:j()().unix(),width:100,height:100,top:0,left:0,data:{type:"image",id:0}}]))}},i.a.createElement(y.a,null)),i.a.createElement(m.a,{color:"primary",component:"span",onClick:function(){return n([].concat(Object(h.a)(e),[{id:j()().unix(),width:100,height:100,top:0,left:0,data:{type:"video",id:0}}]))}},i.a.createElement(b.a,null)),i.a.createElement(m.a,{color:"primary",component:"span",disabled:!a.id,style:{float:"right"},onClick:function(){n(Object(h.a)(e.filter((function(t){return t.id!==a.id})))),r({})}},i.a.createElement(x.a,null)),i.a.createElement(m.a,{color:"primary",component:"span",disabled:!a.id,style:{float:"right"},onClick:function(){return n([].concat(Object(h.a)(e),[{id:j()().unix(),width:100,height:100,top:0,left:0,data:{type:"video",id:0}}]))}},i.a.createElement(v.a,null)))},M=function(){var t=i.a.useState([]),e=Object(o.a)(t,2),n=e[0],a=e[1],r=i.a.useState({}),c=Object(o.a)(r,2),l=c[0],s=c[1];return i.a.createElement("div",{style:{width:960,margin:"auto",marginTop:50}},i.a.createElement(L,{layers:n,setLayers:a,activeLayer:l,setActiveLayer:s}),i.a.createElement(f,{layers:n,setLayers:a,activeLayer:l,setActiveLayer:s}))},k=(n(151),function(){return i.a.createElement(M,null)});Object(r.render)(i.a.createElement(k,null),document.getElementById("root"))},88:function(t,e,n){t.exports=n(152)}},[[88,1,2]]]);
//# sourceMappingURL=main.7a5c6524.chunk.js.map