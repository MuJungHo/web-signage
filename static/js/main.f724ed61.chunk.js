(this.webpackJsonppsn=this.webpackJsonppsn||[]).push([[0],{105:function(t,e,n){t.exports=n(171)},170:function(t,e,n){},171:function(t,e,n){"use strict";n.r(e);n(106);var a=n(0),r=n.n(a),i=n(22),o=n(102),c=n(100),l=n(3),u=n(23),f=n(9),s=function(t){var e=t.cx,n=t.cy,a=t.board,i=t.position,o=(t.layer,t.offset),c=r.a.useState(!1),l=Object(u.a)(c,2),f=l[0],s=l[1],h=function(){a.current.removeEventListener("mousemove",d),f&&s(!1)},d=function(t){o({position:i,x:t.offsetX-e,y:t.offsetY-n})};return r.a.createElement("circle",{onMouseDown:function(){s(!0),a.current.addEventListener("mousemove",d),a.current.addEventListener("mouseup",h)},cx:e,cy:n,r:"4",stroke:"#1592E6",fill:"#FFFFFF"})},h=function(t){var e=t.x1,n=t.y1,a=t.x2,i=t.y2,o=t.show;return r.a.createElement("line",{x1:e,y1:n,x2:a,y2:i,style:{stroke:"#90EE90",strokeWidth:o?1:0}})},d=function(t){var e=t.layer,n=t.board,a=t.setLayers,i=t.layers,o=t.activeLayer,c=t.setActiveLayer,l=r.a.useState(null),d=Object(u.a)(l,2),m=d[0],p=d[1],y=i.filter((function(t){return t.id!==e.id})).map((function(t){return t.top})),b=i.filter((function(t){return t.id!==e.id})).map((function(t){return t.top+t.height})),g=i.filter((function(t){return t.id!==e.id})).map((function(t){return t.left})),w=i.filter((function(t){return t.id!==e.id})).map((function(t){return t.left+t.width})),E=y.concat(b),v=g.concat(w);r.a.useEffect((function(){JSON.stringify(m)!==JSON.stringify({})&&null!==m&&(n.current.addEventListener("mousemove",M),n.current.addEventListener("mouseup",L))}),[m]);var x=function(t){a(i.map((function(e){return e.id===t.id?Object(f.a)({},t):Object(f.a)({},e)})))},O=function(t){var n=t.position,a=t.x,r=t.y;"left-top"===n&&x(Object(f.a)(Object(f.a)({},e),{},{left:e.left+a,top:e.top+r,width:e.width-a,height:e.height-r})),"right-top"===n&&x(Object(f.a)(Object(f.a)({},e),{},{top:e.top+r,width:e.width+a,height:e.height-r})),"left-bottom"===n&&x(Object(f.a)(Object(f.a)({},e),{},{left:e.left+a,width:e.width-a,height:e.height+r})),"right-bottom"===n&&x(Object(f.a)(Object(f.a)({},e),{},{width:e.width+a,height:e.height+r}))},j=function(t){p({left:t.clientX,top:t.clientY})},L=function(){p({}),n.current.removeEventListener("mousemove",M)},M=function(t){var n=e.left+t.x-m.left,a=e.top+t.y-m.top,r=e.left+t.x-m.left+e.width,i=e.top+t.y-m.top+e.height;n<0&&(n=0),a<0&&(a=0),r>960&&(n=960-e.width),i>540&&(a=540-e.height),v.some((function(t){return Math.abs(t-n)<10}))&&(n=v.find((function(t){return Math.abs(t-n)<10}))),E.some((function(t){return Math.abs(t-a)<10}))&&(a=E.find((function(t){return Math.abs(t-a)<10}))),v.some((function(t){return Math.abs(t-r)<10}))&&(n=v.find((function(t){return Math.abs(t-r)<10}))-e.width),E.some((function(t){return Math.abs(t-i)<10}))&&(a=E.find((function(t){return Math.abs(t-i)<10}))-e.height),x(Object(f.a)(Object(f.a)({},e),{},{left:n,top:a}))},k=function(t){return"top"===t?E.some((function(t){return Math.abs(t-e.top)<10})):"bottom"===t?E.some((function(t){return Math.abs(t-e.top-e.height)<10})):"left"===t?v.some((function(t){return Math.abs(t-e.left)<10})):"right"===t?v.some((function(t){return Math.abs(t-e.left-e.width)<10})):void 0};return r.a.createElement("g",{onFocus:function(){return c(Object(f.a)({},e))},onBlur:function(){return c({})},style:{outline:"none"},tabIndex:"-1"},r.a.createElement("rect",{style:{fill:"white",stroke:"red",strokeWidth:1,fillOpacity:".5"},x:e.left,y:e.top,width:e.width,height:e.height,onMouseDown:j}),r.a.createElement("image",{xlinkHref:{image:"../assets/images/".concat(e.data.id,".jpg"),video:"../assets/previews/".concat(e.data.id,".jpg")}[e.data.type],x:e.left,y:e.top,width:e.width,height:e.height,onMouseDown:j}),e.id===o.id&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s,{position:"left-top",board:n,cx:e.left,cy:e.top,layer:e,offset:O}),r.a.createElement(s,{position:"right-top",board:n,cx:e.left+e.width,cy:e.top,layer:e,offset:O}),r.a.createElement(s,{position:"left-bottom",board:n,cx:e.left,cy:e.top+e.height,layer:e,offset:O}),r.a.createElement(s,{position:"right-bottom",board:n,cx:e.left+e.width,cy:e.top+e.height,layer:e,offset:O}),r.a.createElement(h,{x1:e.left-100,y1:e.top,x2:e.left+e.width+100,y2:e.top,show:k("top")}),r.a.createElement(h,{x1:e.left-100,y1:e.top+e.height,x2:e.left+e.width+100,y2:e.top+e.height,show:k("bottom")}),r.a.createElement(h,{x1:e.left,y1:e.top-100,x2:e.left,y2:e.top+e.height+100,show:k("left")}),r.a.createElement(h,{x1:e.left+e.width,y1:e.top-100,x2:e.left+e.width,y2:e.top+e.height+100,show:k("right")})))},m=function(t){var e=t.layers,n=t.setLayers,a=r.a.useRef(),i=r.a.useState({}),o=Object(u.a)(i,2),c=o[0],l=o[1];return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"960",height:"540",ref:a,style:{marginTop:20}},r.a.createElement("rect",{width:"960",height:"540",x:"0",y:"0",fill:"#f5f5f5"}),e.map((function(t){return r.a.createElement(d,{activeLayer:c,setActiveLayer:l,key:t.id,layer:t,layers:e,setLayers:n,board:a})})))},p=n(69),y=n(187),b=n(188),g=n(98),w=n.n(g),E=n(99),v=n.n(E),x=n(65),O=n.n(x),j=function(t){var e=t.layers,n=t.setLayers;return r.a.createElement(y.a,null,r.a.createElement(b.a,{color:"primary",component:"span",onClick:function(){return n([].concat(Object(p.a)(e),[{id:O()().unix(),width:100,height:100,top:0,left:0,data:{type:"image",id:0}}]))}},r.a.createElement(w.a,null)),r.a.createElement(b.a,{color:"primary",component:"span",onClick:function(){return n([].concat(Object(p.a)(e),[{id:O()().unix(),width:100,height:100,top:0,left:0,data:{type:"video",id:0}}]))}},r.a.createElement(v.a,null)))},L=function(){var t=r.a.useState([]),e=Object(u.a)(t,2),n=e[0],a=e[1];return r.a.createElement("div",{style:{width:960,margin:"auto",marginTop:50}},r.a.createElement(j,{layers:n,setLayers:a}),r.a.createElement(m,{layers:n,setLayers:a}))},M=function(){return r.a.createElement("div",null,"View")},k=function(){return r.a.createElement(c.a,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/web-signage/editor",component:L}),r.a.createElement(l.b,{path:"/web-signage/view",component:M}),r.a.createElement(l.a,{to:"/web-signage/editor"})))},F=n(24),S=n(101),J=Object(F.c)({reducer:function(){return{}}}),D=function(){return Object(F.e)(J,Object(F.d)(Object(F.a)(S.a)))},A=(n(170),D()),B=function(){return r.a.createElement(o.a,{store:A},r.a.createElement(k,null))};Object(i.render)(r.a.createElement(B,null),document.getElementById("root"))}},[[105,1,2]]]);
//# sourceMappingURL=main.f724ed61.chunk.js.map