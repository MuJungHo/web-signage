(this["webpackJsonpweb-signage"]=this["webpackJsonpweb-signage"]||[]).push([[0],{232:function(e,t,a){e.exports=a(401)},400:function(e,t,a){},401:function(e,t,a){"use strict";a.r(t);a(233);var n=a(0),r=a.n(n),i=a(13),l=a(15),o=a(10),c=a(6),d=function(e){var t=e.cx,a=e.cy,n=e.board,i=e.position,l=(e.layer,e.offset),c=r.a.useState(!1),d=Object(o.a)(c,2),u=d[0],s=d[1],m=function(){n.current.removeEventListener("mousemove",h),u&&s(!1)},h=function(e){l({position:i,x:e.offsetX-t,y:e.offsetY-a})};return r.a.createElement("circle",{onMouseDown:function(e){e.stopPropagation(),s(!0),n.current.addEventListener("mousemove",h),n.current.addEventListener("mouseup",m)},cx:t,cy:a,r:"4",stroke:"#1592E6",fill:"#FFFFFF"})},u=function(e){var t=e.x1,a=e.y1,n=e.x2,i=e.y2,l=e.show;return r.a.createElement("line",{x1:t,y1:a,x2:n,y2:i,style:{stroke:"#90EE90",strokeWidth:l?1:0}})},s=function(e){var t=e.layer,a=e.editing,n=e.setEditing,i=e.finish,l=r.a.useState(t.data.value||""),c=Object(o.a)(l,2),d=c[0],u=c[1];return r.a.useEffect((function(){document.getElementById("text_".concat(t.id))&&document.getElementById("text_".concat(t.id)).focus()}),[]),r.a.createElement("foreignObject",{x:t.left,y:t.top,width:t.width,height:t.height},r.a.createElement("div",{style:{width:"100%",height:"100%",userSelect:"none",wordWrap:"break-word",color:t.data.fontColor?t.data.fontColor:void 0,backgroundColor:t.data.backgroundColor?t.data.backgroundColor:void 0,fontSize:t.data.fontSize?t.data.fontSize+"px":void 0,fontWeight:t.data.fontWeight,fontStyle:t.data.fontStyle,textDecoration:t.data.textDecoration,textAlign:t.data.textAlign},onDoubleClick:function(){return n(!0)}},a?r.a.createElement("div",{id:"text_".concat(t.id),contentEditable:!0,suppressContentEditableWarning:!0,tabIndex:"-1",onInput:function(e){return u(e.currentTarget.innerText)},onBlur:function(){n(!1),"function"===typeof i&&i(d)},style:{width:t.width,height:t.height}},t.data.value):t.data.value))},m=a(20),h=a.n(m),g=function(e){var t=e.layer,a=e.isActivated,n=r.a.useState(h()().format(t.data.value)),i=Object(o.a)(n,2),l=i[0],c=i[1];return r.a.useEffect((function(){var e=null;return a&&(c(h()().format(t.data.value)),e=setInterval((function(){return c(h()().format(t.data.value))}),1e3)),function(){return clearInterval(e)}}),[a,t]),r.a.createElement("foreignObject",{x:t.left,y:t.top,width:t.width,height:t.height},r.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:t.data.fontColor?t.data.fontColor:void 0,backgroundColor:t.data.backgroundColor?t.data.backgroundColor:void 0,fontSize:t.data.fontSize?t.data.fontSize+"px":void 0}},l))},f=function(e,t){return{image:p[t],video:y[t]}[e]},p={1:{name:"\u64ce\u5929\u5d17",size:"127 KB",type:"jpg",width:133,height:100},2:{name:"Doughnuts",size:"440 KB",type:"jpg",width:100,height:151},3:{name:"Food & Drink",size:"3.7 MB",type:"jpg",width:149,height:100},4:{name:"West Virginia, USA",size:"8 MB",type:"jpg",width:100,height:150}},y={1:{name:"\u6708\u4eae",size:"1.5 MB",type:"mp4",width:178,height:100},2:{name:"\u7a7a\u4e2d\u7684\u82b1\u6735",size:"1.2 MB",type:"mp4",width:178,height:100},3:{name:"\u6eab\u5ba4",size:"8.7 MB",type:"mp4",width:178,height:100},4:{name:"\u6e56\u908a",size:"11 MB",type:"mp4",width:178,height:100}},v=function(e){var t=e.layer,a=e.board,n=e.setLayers,i=e.layers,m=e.activeLayerID,h=e.setActiveLayerID,p=r.a.useState(null),y=Object(o.a)(p,2),v=y[0],b=y[1],E=r.a.useState(!1),j=Object(o.a)(E,2),w=j[0],O=j[1],x=i.filter((function(e){return e.id!==t.id})).map((function(e){return e.top})),C=i.filter((function(e){return e.id!==t.id})).map((function(e){return e.top+e.height})),k=i.filter((function(e){return e.id!==t.id})).map((function(e){return e.left})),L=i.filter((function(e){return e.id!==t.id})).map((function(e){return e.left+e.width})),D=x.concat(C),S=k.concat(L);r.a.useEffect((function(){JSON.stringify(v)!==JSON.stringify({})&&null!==v&&(a.current.addEventListener("mousemove",B),a.current.addEventListener("mouseup",z))}),[v]);var I=function(e){n(i.map((function(t){return t.id===e.id?Object(c.a)({},e):Object(c.a)({},t)})))},M=function(e){var a=e.position,n=e.x,r=e.y;"left-top"===a&&I(Object(c.a)(Object(c.a)({},t),{},{left:t.left+n,top:t.top+r,width:t.width-n,height:t.height-r})),"right-top"===a&&I(Object(c.a)(Object(c.a)({},t),{},{top:t.top+r,width:t.width+n,height:t.height-r})),"left-bottom"===a&&I(Object(c.a)(Object(c.a)({},t),{},{left:t.left+n,width:t.width-n,height:t.height+r})),"right-bottom"===a&&I(Object(c.a)(Object(c.a)({},t),{},{width:t.width+n,height:t.height+r}))},T=function(e){b({left:e.clientX,top:e.clientY})},z=function(){b({}),a.current.removeEventListener("mousemove",B)},B=function(e){var a=t.left+e.x-v.left,n=t.top+e.y-v.top,r=t.left+e.x-v.left+t.width,i=t.top+e.y-v.top+t.height;a<0&&(a=0),n<0&&(n=0),r>window.innerWidth/1.5&&(a=window.innerWidth/1.5-t.width),i>window.innerHeight/1.5&&(n=window.innerHeight/1.5-t.height),S.some((function(e){return Math.abs(e-a)<10}))&&(a=S.find((function(e){return Math.abs(e-a)<10}))),D.some((function(e){return Math.abs(e-n)<10}))&&(n=D.find((function(e){return Math.abs(e-n)<10}))),S.some((function(e){return Math.abs(e-r)<10}))&&(a=S.find((function(e){return Math.abs(e-r)<10}))-t.width),D.some((function(e){return Math.abs(e-i)<10}))&&(n=D.find((function(e){return Math.abs(e-i)<10}))-t.height),I(Object(c.a)(Object(c.a)({},t),{},{left:a,top:n}))},H=function(e){return"top"===e?D.some((function(e){return Math.abs(e-t.top)<10})):"bottom"===e?D.some((function(e){return Math.abs(e-t.top-t.height)<10})):"left"===e?S.some((function(e){return Math.abs(e-t.left)<10})):"right"===e?S.some((function(e){return Math.abs(e-t.left-t.width)<10})):void 0};return r.a.createElement("g",{onFocus:function(){return h(t.id)},style:{outline:"none"},tabIndex:"-1",onMouseDown:T},r.a.createElement("rect",{style:{fill:"transparent",stroke:t.id===m?"#bebebe":void 0,strokeWidth:t.id===m?1:0},x:t.left,y:t.top,width:t.width,height:t.height}),["image","video"].includes(t.data.type)&&r.a.createElement("image",{xlinkHref:{image:"./assets/images/".concat(t.data.id,".jpg"),video:"./assets/previews/".concat(t.data.id,".jpg")}[t.data.type],x:t.left,y:t.top,width:t.width,height:t.height,onMouseDown:T}),["image","video"].includes(t.data.type)&&t.data.id>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("image",{xlinkHref:{image:"./assets/images/0.jpg",video:"./assets/previews/0.jpg"}[t.data.type],x:t.left+10,y:t.top+10,width:20,height:20}),t.id===m&&r.a.createElement("image",{xlinkHref:"./assets/tools/fit.jpg",x:t.left+t.width-30,y:t.top+t.height-30,width:20,height:20,onClick:function(){return function(e){var t=e.width/e.height>1,a=f(e.data.type,e.data.id).width,r=f(e.data.type,e.data.id).height,o=t?e.width:a*e.height/r,d=t?r*e.width/a:e.height,u=i.map((function(e){return e.id===m?Object(c.a)(Object(c.a)({},e),{},{width:o,height:d}):Object(c.a)({},e)}));n(Object(l.a)(u))}(t)}})),!w&&["text","time"].includes(t.data.type)&&0===t.data.value.trim().length&&r.a.createElement("image",{xlinkHref:"./assets/tools/".concat(t.data.type,".jpg"),x:t.left,y:t.top,width:t.width,height:t.height,onMouseDown:T,onDoubleClick:function(){return"text"===t.data.type?O(!0):{}}}),(w||["text","time"].includes(t.data.type)&&t.data.value.trim().length>0)&&{text:r.a.createElement(s,{layer:t,editing:w,setEditing:O,finish:function(e){return I(Object(c.a)(Object(c.a)({},t),{},{data:Object(c.a)(Object(c.a)({},t.data),{},{value:e})}))}}),time:r.a.createElement(g,{layer:t,isActivated:t.id===m})}[t.data.type],t.id===m&&r.a.createElement(r.a.Fragment,null,r.a.createElement(d,{position:"left-top",board:a,cx:t.left,cy:t.top,layer:t,offset:M}),r.a.createElement(d,{position:"right-top",board:a,cx:t.left+t.width,cy:t.top,layer:t,offset:M}),r.a.createElement(d,{position:"left-bottom",board:a,cx:t.left,cy:t.top+t.height,layer:t,offset:M}),r.a.createElement(d,{position:"right-bottom",board:a,cx:t.left+t.width,cy:t.top+t.height,layer:t,offset:M}),r.a.createElement(u,{x1:t.left-100,y1:t.top,x2:t.left+t.width+100,y2:t.top,show:H("top")}),r.a.createElement(u,{x1:t.left-100,y1:t.top+t.height,x2:t.left+t.width+100,y2:t.top+t.height,show:H("bottom")}),r.a.createElement(u,{x1:t.left,y1:t.top-100,x2:t.left,y2:t.top+t.height+100,show:H("left")}),r.a.createElement(u,{x1:t.left+t.width,y1:t.top-100,x2:t.left+t.width,y2:t.top+t.height+100,show:H("right")})))},b=function(e){var t=e.layers,a=e.setLayers,n=e.activeLayerID,i=e.setActiveLayerID,l=e.board,o=r.a.useRef();return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:l.width,height:l.height,ref:o},"color"===l.background.type||0===l.background.imageId?r.a.createElement("rect",{width:l.width,height:l.height,x:"0",y:"0",fill:l.background.color,onClick:function(){return i()}}):r.a.createElement("image",{xlinkHref:"./assets/images/".concat(l.background.imageId,".jpg"),x:"0",y:"0",width:l.width,height:l.height,preserveAspectRatio:"xMidYMid slice",onClick:function(){return i()}}),t.map((function(e){return r.a.createElement(v,{activeLayerID:n,setActiveLayerID:i,key:e.id,layer:e,layers:t,setLayers:a,board:o})})))},E=a(430),j=a(191),w=a.n(j),O=a(192),x=a.n(O),C=function(e){var t=e.layers,a=e.setLayers,n=e.activeLayerID,i=e.setActiveLayerID,o=t.find((function(e){return e.id===n}))||{};return r.a.createElement("div",{style:{width:"100%",backgroundColor:"rgb(241, 243, 247)"}},r.a.createElement(E.a,{color:"primary",component:"span",disabled:!n,style:{float:"right"},onClick:function(){a(Object(l.a)(t.filter((function(e){return e.id!==n})))),i()}},r.a.createElement(w.a,null)),r.a.createElement(E.a,{color:"primary",component:"span",disabled:!n,style:{float:"right"},onClick:function(){var e=h()().unix();a([].concat(Object(l.a)(t),[Object(c.a)(Object(c.a)({},o),{},{id:e,left:o.left+20,top:o.top+20})])),i(e)}},r.a.createElement(x.a,null)))},k=a(31),L=a(433),D=a(193),S=a.n(D),I=a(194),M=a.n(I),T=a(196),z=a.n(T),B=a(195),H=a.n(B),W=function(e){var t,a=e.handleMouseDown,n=e.addLayer,i=(t={padding:5},Object(k.a)(t,"padding",5),Object(k.a)(t,"marginTop",20),Object(k.a)(t,"backgroundColor","white"),t),l={height:52,width:52},o=[{type:"image",icon:r.a.createElement(S.a,{style:Object(c.a)({},l)})},{type:"video",icon:r.a.createElement(M.a,{style:Object(c.a)({},l)})},{type:"text",icon:r.a.createElement(H.a,{style:Object(c.a)({},l)})},{type:"time",icon:r.a.createElement(z.a,{style:Object(c.a)({},l)})}];return r.a.createElement("div",{style:{width:104,height:"calc(100vh - 80px)",backgroundColor:"#f1f3f7",display:"flex",flexDirection:"column",alignItems:"center"}},o.map((function(e){return r.a.createElement(L.a,{key:e.type,draggable:"true",variant:"outlined",color:"primary",onClick:function(){return n(e.type)},onMouseDown:function(){return a(e.type)},style:Object(c.a)({},i)},e.icon)})))},A=a(447),R=a(449),Y=a(443),F=a(446),P=a(448),J=a(435),N=a(436),_=a(437),U=a(438),X=function(e){var t=e.isDialogOpen,a=e.setDialogOpen,n=e.close,i=e.type,l=e.confirm,d=r.a.useState(),u=Object(o.a)(d,2),s=u[0],m=u[1],h={maxHeight:90,margin:10};return r.a.createElement(P.a,{open:t,onClose:function(){"function"===typeof n&&n(),a(!1)},fullWidth:!0,maxWidth:"sm"},r.a.createElement(J.a,null,"Media Library > ".concat(i)),r.a.createElement(N.a,null),r.a.createElement(_.a,null,r.a.createElement("div",{style:{width:"100%",height:240,backgroundColor:"rgba(74, 91, 117, 0.1",marginTop:16,display:"flex",flexWrap:"wrap"}},[1,2,3,4].map((function(e){return r.a.createElement("img",{key:e,style:Object(c.a)(Object(c.a)({},h),{},{border:"3px solid ".concat(s===e?"#3f51b5":"transparent")}),onClick:function(){m(e)},alt:"Contemplative Reptile",src:{image:"./assets/images/".concat(e,".jpg"),video:"./assets/previews/".concat(e,".jpg")}[i],title:"Contemplative Reptile"})})))),r.a.createElement(U.a,null,r.a.createElement(L.a,{variant:"contained",onClick:function(){return a(!1)}},"Cancel"),r.a.createElement(L.a,{variant:"contained",style:{marginLeft:20},color:"primary",disabled:!s,onClick:function(e){"function"===typeof l&&l(s),a(!1)}},"Confirm")))},K=a(215),V=function(e){var t=e.value,a=e.onChange,n=e.style,i=e.disabled,l=r.a.useState(!1),d=Object(o.a)(l,2),u=d[0],s=d[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{type:"text",variant:"outlined",value:t,style:Object(c.a)({},n),InputProps:{inputProps:{style:{padding:".5rem"}}},onClick:function(){return i?{}:s(!0)},onChange:a,fullWidth:!0,disabled:i,InputLabelProps:{shrink:!0}}),r.a.createElement(P.a,{onClose:function(){return s(!1)},open:u},r.a.createElement(K.a,{color:t,onChangeComplete:function(e){a(e),s(!1)}})))},q=function(e){var t=e.activeLayer;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",marginTop:20}},r.a.createElement(A.a,{label:"Left",type:"text",variant:"outlined",value:t.left}),r.a.createElement(A.a,{label:"Top",type:"text",variant:"outlined",style:{marginLeft:20},value:t.top})),r.a.createElement("div",{style:{display:"flex",marginTop:20}},r.a.createElement(A.a,{label:"Width",type:"text",variant:"outlined",value:t.width}),r.a.createElement(A.a,{label:"Height",type:"text",variant:"outlined",style:{marginLeft:20},value:t.height})))},G=a(203),Q=a.n(G),Z=a(204),$=a.n(Z),ee=a(205),te=a.n(ee),ae=a(442),ne=a(453),re=function(e){var t=e.layers,a=e.setLayers,n=e.activeLayer,i=r.a.useState(function(e){var t=[];return"underline"===e.textDecoration&&t.push("underlined"),"italic"===e.fontStyle&&t.push("italic"),"bold"===e.fontWeight&&t.push("bold"),t}(n.data)),d=Object(o.a)(i,2),u=d[0],s=d[1];return r.a.createElement(ne.a,{value:u,onChange:function(e,r){s(r);var i=t.map((function(e){return e.id===n.id?Object(c.a)(Object(c.a)({},e),{},{data:Object(c.a)(Object(c.a)({},e.data),{},{textDecoration:r.includes("underlined")?"underline":"none",fontStyle:r.includes("italic")?"italic":"normal",fontWeight:r.includes("bold")?"bold":"normal"})}):Object(c.a)({},e)}));a(Object(l.a)(i))},"aria-label":"text formatting"},r.a.createElement(ae.a,{value:"bold","aria-label":"bold"},r.a.createElement(Q.a,null)),r.a.createElement(ae.a,{value:"italic","aria-label":"italic"},r.a.createElement($.a,null)),r.a.createElement(ae.a,{value:"underlined","aria-label":"underlined"},r.a.createElement(te.a,null)))},ie=a(206),le=a.n(ie),oe=a(207),ce=a.n(oe),de=a(208),ue=a.n(de),se=function(e){var t=e.layers,a=e.setLayers,n=e.activeLayer,i=r.a.useState(n.data.textAlign||"left"),d=Object(o.a)(i,2),u=d[0],s=d[1];return r.a.createElement(ne.a,{value:u,exclusive:!0,onChange:function(e,r){s(r);var i=t.map((function(e){return e.id===n.id?Object(c.a)(Object(c.a)({},e),{},{data:Object(c.a)(Object(c.a)({},e.data),{},{textAlign:r})}):Object(c.a)({},e)}));a(Object(l.a)(i))},"aria-label":"text alignment"},r.a.createElement(ae.a,{value:"left","aria-label":"left aligned"},r.a.createElement(le.a,null)),r.a.createElement(ae.a,{value:"center","aria-label":"centered"},r.a.createElement(ce.a,null)),r.a.createElement(ae.a,{value:"right","aria-label":"right aligned"},r.a.createElement(ue.a,null)))},me=function(e){var t=e.layers,a=e.setLayers,n=e.activeLayer,i=function(e,r){var i=t.map((function(t){return t.id===n.id?Object(c.a)(Object(c.a)({},t),{},{data:Object(c.a)(Object(c.a)({},t.data),{},Object(k.a)({},e,r))}):Object(c.a)({},t)}));a(Object(l.a)(i))};return r.a.createElement("div",null,r.a.createElement("h2",null,"Text Properties"),r.a.createElement(q,{activeLayer:n}),r.a.createElement("h3",{style:{marginTop:20,marginBottom:10}},"Text Content"),r.a.createElement(A.a,{fullWidth:!0,multiline:!0,variant:"outlined",value:n.data.value,onChange:function(e){return i("value",e.target.value)},minRows:5}),r.a.createElement("h3",{style:{marginTop:20,marginBottom:10}},"Font Properties"),r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement("span",{style:{marginRight:10}},"Color:"),r.a.createElement(V,{value:n.data.fontColor||"#000000",disabled:0===n.data.value.trim().length,onChange:function(e){return i("fontColor",e.hex)}}),r.a.createElement("span",{style:{marginLeft:20,marginRight:10}},"Size:"),r.a.createElement(A.a,{type:"number",variant:"outlined",disabled:0===n.data.value.trim().length,InputProps:{inputProps:{style:{padding:".5rem"}}},value:n.data.fontSize||14,onChange:function(e){return i("fontSize",e.target.value)}})),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10}},r.a.createElement(re,{layers:t,setLayers:a,activeLayer:n}),r.a.createElement(se,{layers:t,setLayers:a,activeLayer:n})))},he=a(441),ge=a(445),fe=a(452),pe=function(e){var t=e.layers,a=e.setLayers,n=e.activeLayer,i=function(e,r){var i=t.map((function(t){return t.id===n.id?Object(c.a)(Object(c.a)({},t),{},{data:Object(c.a)(Object(c.a)({},t.data),{},Object(k.a)({},e,r))}):Object(c.a)({},t)}));a(Object(l.a)(i))};return r.a.createElement("div",null,r.a.createElement("h2",null,"Time Properties"),r.a.createElement(q,{activeLayer:n}),r.a.createElement("h3",{style:{marginTop:20,marginBottom:10}},"Format"),r.a.createElement(he.a,{variant:"outlined",fullWidth:!0},r.a.createElement(ge.a,{value:n.data.value,onChange:function(e){return i("value",e.target.value)},displayEmpty:!0},r.a.createElement(fe.a,{value:""},"Empty"),r.a.createElement(fe.a,{value:"YYYY/MM/DD HH:mm:ss"},"YYYY/MM/DD HH:mm:ss"),r.a.createElement(fe.a,{value:"YYYY/MM/DD hh:mm:ss a"},"YYYY/MM/DD hh:mm:ss a"),r.a.createElement(fe.a,{value:"HH:mm:ss"},"HH:mm:ss"),r.a.createElement(fe.a,{value:"hh:mm:ss a"},"hh:mm:ss a"))),r.a.createElement("h3",{style:{marginTop:20,marginBottom:10}},"Font Properties"),r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement("span",{style:{marginRight:10}},"Color:"),r.a.createElement(V,{value:n.data.fontColor||"#000000",disabled:0===n.data.value.trim().length,onChange:function(e){return i("fontColor",e.hex)}}),r.a.createElement("span",{style:{marginLeft:20,marginRight:10}},"Size:"),r.a.createElement(A.a,{type:"number",variant:"outlined",disabled:0===n.data.value.trim().length,InputProps:{inputProps:{style:{padding:".5rem"}}},value:n.data.fontSize||14,onChange:function(e){return i("fontSize",e.target.value)}})))},ye=function(e){var t=e.activeLayer;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",marginTop:20}},r.a.createElement(A.a,{label:"Left",type:"text",variant:"outlined",value:t.left}),r.a.createElement(A.a,{label:"Top",type:"text",variant:"outlined",style:{marginLeft:20},value:t.top})),r.a.createElement("div",{style:{display:"flex",marginTop:20}},r.a.createElement(A.a,{label:"Width",type:"text",variant:"outlined",value:t.width}),r.a.createElement(A.a,{label:"Height",type:"text",variant:"outlined",style:{marginLeft:20},value:t.height})))},ve=function(e){var t=e.layers,a=e.setLayers,n=e.activeLayer,i=r.a.useState(!1),d=Object(o.a)(i,2),u=d[0],s=d[1];return r.a.createElement("div",null,r.a.createElement("h2",null,"Image Properties"),r.a.createElement(ye,{activeLayer:n}),r.a.createElement(L.a,{variant:"contained",style:{marginTop:20},color:"primary",onClick:function(){return s(!0)}},"Open Media Libaray"),0!==n.data.id&&r.a.createElement("div",{style:{marginTop:20,display:"flex"}},r.a.createElement("img",{style:{maxHeight:100},alt:"Contemplative Reptile",src:"./assets/images/".concat(n.data.id,".jpg"),title:"Contemplative Reptile"}),r.a.createElement("div",{style:{marginLeft:20}},r.a.createElement("h3",{style:{marginTop:10}},"Name: ".concat(f("image",n.data.id).name)),r.a.createElement("h3",{style:{marginTop:10}},"Size: ".concat(f("image",n.data.id).size)),r.a.createElement("h3",{style:{marginTop:10}},"Type: ".concat(f("image",n.data.id).type)))),r.a.createElement(X,{type:"image",isDialogOpen:u,setDialogOpen:s,confirm:function(e){return function(e){var r=t.map((function(t){return t.id===n.id?Object(c.a)(Object(c.a)({},t),{},{width:f("image",e).width,height:f("image",e).height,data:Object(c.a)(Object(c.a)({},t.data),{},{id:e})}):Object(c.a)({},t)}));a(Object(l.a)(r))}(e)}}))},be=function(e){var t=e.layers,a=e.setLayers,n=e.activeLayer,i=r.a.useState(!1),d=Object(o.a)(i,2),u=d[0],s=d[1];return r.a.createElement("div",null,r.a.createElement("h2",null,"Video Properties"),r.a.createElement(ye,{activeLayer:n}),r.a.createElement(L.a,{variant:"contained",style:{marginTop:20},color:"primary",onClick:function(){return s(!0)}},"Open Media Libaray"),0!==n.data.id&&r.a.createElement("div",{style:{marginTop:20,display:"flex"}},r.a.createElement("img",{style:{maxHeight:100},alt:"Contemplative Reptile",src:"./assets/previews/".concat(n.data.id,".jpg"),title:"Contemplative Reptile"}),r.a.createElement("div",{style:{marginLeft:20}},r.a.createElement("h3",{style:{marginTop:10}},"Name: ".concat(f("video",n.data.id).name)),r.a.createElement("h3",{style:{marginTop:10}},"Size: ".concat(f("video",n.data.id).size)),r.a.createElement("h3",{style:{marginTop:10}},"Type: ".concat(f("video",n.data.id).type)))),r.a.createElement(X,{type:"video",isDialogOpen:u,setDialogOpen:s,confirm:function(e){return function(e){var r=t.map((function(t){return t.id===n.id?Object(c.a)(Object(c.a)({},t),{},{width:f("video",e).width,height:f("video",e).height,data:Object(c.a)(Object(c.a)({},t.data),{},{id:e})}):Object(c.a)({},t)}));a(Object(l.a)(r))}(e)}}))},Ee=function(e){var t=e.board,a=e.setBoard,n=r.a.useState(!1),i=Object(o.a)(n,2),l=i[0],d=i[1];return r.a.createElement("div",null,r.a.createElement("h2",null,"Board Properties"),r.a.createElement("h3",{style:{margin:"16px 0"}},"Width: ".concat(Math.floor(t.width))),r.a.createElement("h3",{style:{margin:"16px 0"}},"Height: ".concat(Math.floor(t.height))),r.a.createElement("h3",{style:{marginTop:16,marginBottom:8}},"Background: "),r.a.createElement(R.a,{row:!0,"aria-label":"gender",name:"gender1",value:t.background.type,onChange:function(e){return a(Object(c.a)(Object(c.a)({},t),{},{background:Object(c.a)(Object(c.a)({},t.background),{},{type:e.target.value})}))}},r.a.createElement(Y.a,{value:"color",control:r.a.createElement(F.a,{color:"primary"}),label:"color"}),r.a.createElement(Y.a,{value:"image",control:r.a.createElement(F.a,{color:"primary"}),label:"image"})),"color"===t.background.type?r.a.createElement(V,{value:t.background.color,onChange:function(e){return a(Object(c.a)(Object(c.a)({},t),{},{background:Object(c.a)(Object(c.a)({},t.background),{},{color:e.hex})}))}}):r.a.createElement(L.a,{variant:"contained",color:"primary",onClick:function(){return d(!0)}},"Open Media Libaray"),"image"===t.background.type&&0!==t.background.imageId&&r.a.createElement("div",{style:{marginTop:20,display:"flex"}},r.a.createElement("img",{style:{maxHeight:100},alt:"Contemplative Reptile",src:"./assets/images/".concat(t.background.imageId,".jpg"),title:"Contemplative Reptile"}),r.a.createElement("div",{style:{marginLeft:20}},r.a.createElement("h3",{style:{marginTop:10}},"Name: ".concat(f("image",t.background.imageId).name)),r.a.createElement("h3",{style:{marginTop:10}},"Size: ".concat(f("image",t.background.imageId).size)),r.a.createElement("h3",{style:{marginTop:10}},"Type: ".concat(f("image",t.background.imageId).type)))),r.a.createElement(X,{type:"image",isDialogOpen:l,setDialogOpen:d,confirm:function(e){return a(Object(c.a)(Object(c.a)({},t),{},{background:Object(c.a)(Object(c.a)({},t.background),{},{imageId:e})}))}}))},je=function(e){var t=e.layers,a=e.setLayers,n=e.activeLayerID,i=e.board,l=e.setBoard,o=t.find((function(e){return e.id===n}))||{};return r.a.createElement("div",{style:{width:380,height:"calc(100vh - 80px)",backgroundColor:"#f1f3f7",padding:20}},o.data?{image:r.a.createElement(ve,{activeLayer:o,layers:t,setLayers:a}),video:r.a.createElement(be,{activeLayer:o,layers:t,setLayers:a}),text:r.a.createElement(me,{activeLayer:o,layers:t,setLayers:a}),time:r.a.createElement(pe,{activeLayer:o,layers:t,setLayers:a})}[o.data.type]:r.a.createElement(Ee,{board:i,setBoard:l}))},we=a(135),Oe=a.n(we),xe=a(209),Ce=a(216),ke=a(210),Le=a.n(ke),De=function(e){var t=e.layer;return r.a.createElement("div",{style:{width:1.5*t.width,height:1.5*t.height,wordWrap:"break-word",overflow:"hidden",color:t.data.fontColor?t.data.fontColor:void 0,backgroundColor:t.data.backgroundColor?t.data.backgroundColor:void 0,fontSize:t.data.fontSize?1.5*t.data.fontSize+"px":21,fontWeight:t.data.fontWeight,fontStyle:t.data.fontStyle,textDecoration:t.data.textDecoration,textAlign:t.data.textAlign}},t.data.value)},Se=function(e){var t=e.layer,a=r.a.useState(h()().format(t.data.value)),n=Object(o.a)(a,2),i=n[0],l=n[1];return r.a.useEffect((function(){var e;return l(h()().format(t.data.value)),e=setInterval((function(){return l(h()().format(t.data.value))}),1e3),function(){return clearInterval(e)}}),[]),r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:1.5*t.width,height:1.5*t.height,color:t.data.fontColor?t.data.fontColor:void 0,backgroundColor:t.data.backgroundColor?t.data.backgroundColor:void 0,fontSize:t.data.fontSize?1.5*t.data.fontSize+"px":21}},i)},Ie=function(e){var t=e.layer;return r.a.createElement("video",{width:1.5*t.width,height:1.5*t.height,autoPlay:!0},r.a.createElement("source",{src:"./assets/videos/".concat(t.data.id,".mp4"),type:"video/mp4"}))},Me=function(e){var t=e.layer;return r.a.createElement("img",{src:"./assets/images/".concat(t.data.id,".jpg"),style:{width:1.5*t.width,height:1.5*t.height}})},Te=function(e){var t=e.layer;return r.a.createElement("div",{style:{position:"absolute",width:1.5*t.width,height:1.5*t.height,top:1.5*t.top,left:1.5*t.left}},{image:r.a.createElement(Me,{layer:t}),video:r.a.createElement(Ie,{layer:t}),text:r.a.createElement(De,{layer:t}),time:r.a.createElement(Se,{layer:t})}[t.data.type])},ze=function(e){var t=e.isDialogOpen,a=e.setDialogOpen,n=e.layers,i=e.board;return r.a.createElement(P.a,{open:t,onClose:function(){return a(!1)},fullScreen:!0},r.a.createElement("div",{style:{width:"100%",height:"100%",position:"relative",background:"color"===i.background.type||0===i.background.imageId?i.background.color:"no-repeat center/100% url(./assets/images/".concat(i.background.imageId,".jpg)")}},n.map((function(e){return r.a.createElement(Te,{key:e.id,layer:e})})),r.a.createElement(E.a,{onClick:function(){return a(!1)}},r.a.createElement(Le.a,null))))},Be=a(214),He=a.n(Be),We=a(213),Ae=a.n(We),Re=a(212),Ye=a.n(Re),Fe=a(211),Pe=a.n(Fe),Je=function(e){var t=e.layers,a=e.board,n=e.setLayers,i=e.setBoard,d=r.a.useState(!1),u=Object(o.a)(d,2),s=u[0],m=u[1],g=r.a.useState(null),f=Object(o.a)(g,2),p=f[0],y=f[1],v=Boolean(p),b=function(){y(null)};return r.a.createElement("div",{style:{height:80,backgroundColor:"#f1f3f7",display:"flex",alignItems:"center",padding:"0 20px"}},r.a.createElement("h1",null,"Content Editor"),r.a.createElement("a",{href:"https://github.com/MuJungHo/web-signage",style:{marginLeft:20}},r.a.createElement("img",{src:"./assets/github.png",style:{width:21,height:21,borderRadius:"50%"}})),r.a.createElement("div",{style:{flex:1}}),r.a.createElement(E.a,{color:"primary",onClick:function(e){y(e.currentTarget)}},r.a.createElement(Pe.a,null)),r.a.createElement(Ce.a,{anchorEl:p,id:"account-menu",open:v,onClose:b,onClick:b,transformOrigin:{horizontal:"right",vertical:"bottom"},anchorOrigin:{horizontal:"right",vertical:"bottom"}},r.a.createElement(fe.a,{onClick:function(){var e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","application/json"),e.click(),e.onchange=function(e){var t=e.target.files[0],a=new FileReader;a.onload=function(){var e=Object(xe.a)(Oe.a.mark((function e(t){var a;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JSON.parse(t.target.result);case 2:a=e.sent,console.log(a),n(Object(l.a)(a.layers)),i(Object(c.a)({},a.board)),m(!0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.readAsText(t)}}},r.a.createElement(Ye.a,{style:{marginRight:10}}),"Upload"),r.a.createElement(fe.a,{onClick:function(){var e={layers:t,board:a},n=JSON.stringify(e),r="data:application/json;charset=utf-8,"+encodeURIComponent(n),i=document.createElement("a");i.setAttribute("href",r),i.setAttribute("download","content_".concat(h()().unix(),".json")),i.click()}},r.a.createElement(Ae.a,{style:{marginRight:10}}),"Download")),r.a.createElement(E.a,{color:"primary",onClick:function(){return m(!0)}},r.a.createElement(He.a,null)),r.a.createElement(ze,{isDialogOpen:s,setDialogOpen:m,layers:t,board:a}))},Ne={margin:"auto",display:"flex",alignItems:"center",width:"100%"},_e=function(){var e=r.a.useRef(),t=r.a.useState([]),a=Object(o.a)(t,2),n=a[0],i=a[1],c=r.a.useState(""),d=Object(o.a)(c,2),u=d[0],s=d[1],m=r.a.useState(!1),g=Object(o.a)(m,2),f=g[0],p=g[1],y=r.a.useState(),v=Object(o.a)(y,2),E=v[0],j=v[1],w=r.a.useState({width:window.innerWidth/1.5,height:window.innerHeight/1.5,background:{type:"color",color:"#f5f5f5",imageId:0}}),O=Object(o.a)(w,2),x=O[0],k=O[1],L=function(e){return e<0?0:e};return r.a.createElement("div",{style:{width:"100%",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.13)"}},r.a.createElement(Je,{layers:n,setLayers:i,board:x,setBoard:k}),r.a.createElement("div",{style:{width:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement(W,{addLayer:function(e){var t=h()().unix();i([].concat(Object(l.a)(n),[{id:t,width:100,height:100,top:0,left:0,data:{type:e,id:0,value:""}}])),j(t),p(!1)},handleMouseDown:function(e){s(e),p(!0)}}),r.a.createElement("div",{style:{flex:1,padding:20,display:"flex",flexDirection:"column",alignItems:"center",height:"calc(100vh - 80px)"}},r.a.createElement(C,{layers:n,setLayers:i,activeLayerID:E,setActiveLayerID:j}),r.a.createElement("div",{ref:e,droppable:"true",onDrop:function(t){if(t.preventDefault(),f){var a=h()().unix();i([].concat(Object(l.a)(n),[{id:a,width:100,height:100,top:L(t.clientY-e.current.offsetTop-80-50),left:L(t.clientX-e.current.offsetLeft-50),data:{type:u,id:0,value:""}}])),j(a),p(!1)}},onDragOver:function(e){e.stopPropagation(),e.preventDefault()},style:Ne},r.a.createElement(b,{board:x,layers:n,setLayers:i,activeLayerID:E,setActiveLayerID:j}))),r.a.createElement(je,{board:x,setBoard:k,layers:n,setLayers:i,activeLayerID:E})))},Ue=(a(400),function(){return r.a.createElement(_e,null)});Object(i.render)(r.a.createElement(Ue,null),document.getElementById("root"))}},[[232,1,2]]]);
//# sourceMappingURL=main.2dc737f5.chunk.js.map