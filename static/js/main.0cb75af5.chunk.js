(this["webpackJsonpweb-signage"]=this["webpackJsonpweb-signage"]||[]).push([[0],{206:function(e,t,a){e.exports=a(374)},373:function(e,t,a){},374:function(e,t,a){"use strict";a.r(t);a(207);var n=a(0),i=a.n(n),r=a(11),o=a(34),c=a(14),l=a(7),s=function(e){var t=e.cx,a=e.cy,n=e.board,r=e.position,o=(e.layer,e.offset),l=i.a.useState(!1),s=Object(c.a)(l,2),d=s[0],m=s[1],u=function(){n.current.removeEventListener("mousemove",p),d&&m(!1)},p=function(e){o({position:r,x:e.offsetX-t,y:e.offsetY-a})};return i.a.createElement("circle",{onMouseDown:function(){m(!0),n.current.addEventListener("mousemove",p),n.current.addEventListener("mouseup",u)},cx:t,cy:a,r:"4",stroke:"#1592E6",fill:"#FFFFFF"})},d=function(e){var t=e.x1,a=e.y1,n=e.x2,r=e.y2,o=e.show;return i.a.createElement("line",{x1:t,y1:a,x2:n,y2:r,style:{stroke:"#90EE90",strokeWidth:o?1:0}})},m=function(e){var t=e.layer,a=e.board,n=e.setLayers,r=e.layers,o=e.activeLayerID,m=e.setActiveLayerID,u=i.a.useState(null),p=Object(c.a)(u,2),g=p[0],f=p[1],h=r.filter((function(e){return e.id!==t.id})).map((function(e){return e.top})),y=r.filter((function(e){return e.id!==t.id})).map((function(e){return e.top+e.height})),b=r.filter((function(e){return e.id!==t.id})).map((function(e){return e.left})),v=r.filter((function(e){return e.id!==t.id})).map((function(e){return e.left+e.width})),E=h.concat(y),w=b.concat(v);i.a.useEffect((function(){JSON.stringify(g)!==JSON.stringify({})&&null!==g&&(a.current.addEventListener("mousemove",L),a.current.addEventListener("mouseup",k))}),[g]);var O=function(e){n(r.map((function(t){return t.id===e.id?Object(l.a)({},e):Object(l.a)({},t)})))},j=function(e){var a=e.position,n=e.x,i=e.y;"left-top"===a&&O(Object(l.a)(Object(l.a)({},t),{},{left:t.left+n,top:t.top+i,width:t.width-n,height:t.height-i})),"right-top"===a&&O(Object(l.a)(Object(l.a)({},t),{},{top:t.top+i,width:t.width+n,height:t.height-i})),"left-bottom"===a&&O(Object(l.a)(Object(l.a)({},t),{},{left:t.left+n,width:t.width-n,height:t.height+i})),"right-bottom"===a&&O(Object(l.a)(Object(l.a)({},t),{},{width:t.width+n,height:t.height+i}))},x=function(e){f({left:e.clientX,top:e.clientY})},k=function(){f({}),a.current.removeEventListener("mousemove",L)},L=function(e){var a=t.left+e.x-g.left,n=t.top+e.y-g.top,i=t.left+e.x-g.left+t.width,r=t.top+e.y-g.top+t.height;a<0&&(a=0),n<0&&(n=0),i>window.innerWidth/1.5&&(a=window.innerWidth/1.5-t.width),r>window.innerHeight/1.5&&(n=window.innerHeight/1.5-t.height),w.some((function(e){return Math.abs(e-a)<10}))&&(a=w.find((function(e){return Math.abs(e-a)<10}))),E.some((function(e){return Math.abs(e-n)<10}))&&(n=E.find((function(e){return Math.abs(e-n)<10}))),w.some((function(e){return Math.abs(e-i)<10}))&&(a=w.find((function(e){return Math.abs(e-i)<10}))-t.width),E.some((function(e){return Math.abs(e-r)<10}))&&(n=E.find((function(e){return Math.abs(e-r)<10}))-t.height),O(Object(l.a)(Object(l.a)({},t),{},{left:a,top:n}))},C=function(e){return"top"===e?E.some((function(e){return Math.abs(e-t.top)<10})):"bottom"===e?E.some((function(e){return Math.abs(e-t.top-t.height)<10})):"left"===e?w.some((function(e){return Math.abs(e-t.left)<10})):"right"===e?w.some((function(e){return Math.abs(e-t.left-t.width)<10})):void 0};return i.a.createElement("g",{onFocus:function(){return m(t.id)},style:{outline:"none"},tabIndex:"-1"},i.a.createElement("rect",{style:{fill:"white",stroke:t.id===o?"#bebebe":void 0,strokeWidth:1,fillOpacity:".5"},x:t.left,y:t.top,width:t.width,height:t.height,onMouseDown:x}),i.a.createElement("image",{xlinkHref:{image:"./assets/images/".concat(t.data.id,".jpg"),video:"./assets/previews/".concat(t.data.id,".jpg")}[t.data.type],x:t.left+1,y:t.top+1,width:t.width-2,height:t.height-2,onMouseDown:x}),t.id===o&&i.a.createElement(i.a.Fragment,null,i.a.createElement(s,{position:"left-top",board:a,cx:t.left,cy:t.top,layer:t,offset:j}),i.a.createElement(s,{position:"right-top",board:a,cx:t.left+t.width,cy:t.top,layer:t,offset:j}),i.a.createElement(s,{position:"left-bottom",board:a,cx:t.left,cy:t.top+t.height,layer:t,offset:j}),i.a.createElement(s,{position:"right-bottom",board:a,cx:t.left+t.width,cy:t.top+t.height,layer:t,offset:j}),i.a.createElement(d,{x1:t.left-100,y1:t.top,x2:t.left+t.width+100,y2:t.top,show:C("top")}),i.a.createElement(d,{x1:t.left-100,y1:t.top+t.height,x2:t.left+t.width+100,y2:t.top+t.height,show:C("bottom")}),i.a.createElement(d,{x1:t.left,y1:t.top-100,x2:t.left,y2:t.top+t.height+100,show:C("left")}),i.a.createElement(d,{x1:t.left+t.width,y1:t.top-100,x2:t.left+t.width,y2:t.top+t.height+100,show:C("right")})))},u=function(e){var t=e.layers,a=e.setLayers,n=e.activeLayerID,r=e.setActiveLayerID,o=e.board,c=i.a.useRef();return i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:o.width,height:o.height,ref:c,style:{marginTop:20}},"color"===o.background.type||0===o.background.imageId?i.a.createElement("rect",{width:o.width,height:o.height,x:"0",y:"0",fill:o.background.color,onClick:function(){return r()}}):i.a.createElement("image",{xlinkHref:"./assets/images/".concat(o.background.imageId,".jpg"),x:"0",y:"0",width:o.width,height:o.height,preserveAspectRatio:"xMidYMid slice",onClick:function(){return r()}}),t.map((function(e){return i.a.createElement(m,{activeLayerID:n,setActiveLayerID:r,key:e.id,layer:e,layers:t,setLayers:a,board:c})})))},p=a(401),g=a(181),f=a.n(g),h=a(182),y=a.n(h),b=a(83),v=a.n(b),E=function(e){var t=e.layers,a=e.setLayers,n=e.activeLayerID,r=e.setActiveLayerID,c=t.find((function(e){return e.id===n}))||{};return i.a.createElement("div",{style:{width:"100%"}},i.a.createElement(p.a,{color:"primary",component:"span",disabled:!n,style:{float:"right"},onClick:function(){a(Object(o.a)(t.filter((function(e){return e.id!==n})))),r({})}},i.a.createElement(f.a,null)),i.a.createElement(p.a,{color:"primary",component:"span",disabled:!n,style:{float:"right"},onClick:function(){a([].concat(Object(o.a)(t),[Object(l.a)(Object(l.a)({},c),{},{id:v()().unix(),left:c.left+10,top:c.top+10})]))}},i.a.createElement(y.a,null)))},w=a(51),O=a(404),j=a(183),x=a.n(j),k=a(184),L=a.n(k),C=function(e){var t,a=e.addLayer,n=(t={padding:5},Object(w.a)(t,"padding",5),Object(w.a)(t,"marginTop",20),Object(w.a)(t,"backgroundColor","white"),t),r={height:52,width:52};return i.a.createElement("div",{style:{width:104,height:"calc(100vh - 80px)",backgroundColor:"#f1f3f7",display:"flex",flexDirection:"column",alignItems:"center"}},i.a.createElement(O.a,{variant:"outlined",color:"primary",onClick:function(){return a("image")},style:Object(l.a)({},n)},i.a.createElement(x.a,{style:Object(l.a)({},r)})),i.a.createElement(O.a,{variant:"outlined",color:"primary",onClick:function(){return a("video")},style:Object(l.a)({},n)},i.a.createElement(L.a,{style:Object(l.a)({},r)})))},I=a(411),D=a(415),T=a(410),M=a(413),S=a(414),B=a(406),z=a(407),W=a(408),H=a(409),F=function(e){var t=e.isDialogOpen,a=e.setDialogOpen,n=e.close,r=e.type,o=e.confirm,s=i.a.useState(),d=Object(c.a)(s,2),m=d[0],u=d[1],p={maxHeight:100,marginLeft:20,marginTop:20};return i.a.createElement(S.a,{open:t,onClose:function(){"function"===typeof n&&n(),a(!1)},fullWidth:!0,maxWidth:"sm"},i.a.createElement(B.a,null,"Media Library > ".concat(r)),i.a.createElement(z.a,null),i.a.createElement(W.a,null,i.a.createElement("div",{style:{width:"100%",height:240,backgroundColor:"rgba(74, 91, 117, 0.1",marginTop:16,display:"flex",flexWrap:"wrap"}},[1,2,3,4].map((function(e){return i.a.createElement("img",{key:e,style:Object(l.a)(Object(l.a)({},p),{},{border:"3px solid ".concat(m===e?"#3f51b5":"transparent")}),onClick:function(){u(e)},alt:"Contemplative Reptile",src:{image:"./assets/images/".concat(e,".jpg"),video:"./assets/previews/".concat(e,".jpg")}[r],title:"Contemplative Reptile"})})))),i.a.createElement(H.a,null,i.a.createElement(O.a,{variant:"contained",onClick:function(){return a(!1)}},"Cancel"),i.a.createElement(O.a,{variant:"contained",style:{marginLeft:20},color:"primary",disabled:!m,onClick:function(e){"function"===typeof o&&o(m),a(!1)}},"Confirm")))},R=function(e,t){return{image:P[t],video:K[t]}[e]},P={1:{name:"\u64ce\u5929\u5d17",size:"127 KB",type:"jpg"},2:{name:"\u6211\u61f7\u7591\u59b3\u5728\u958b\u8eca",size:"95 KB",type:"jpg"},3:{name:"\u6211\u77e5\u9053\u4e86",size:"18 KB",type:"jpg"},4:{name:"\u5225\u518d\u8aaa\u4e86",size:"52 KB",type:"jpg"}},K={1:{name:"\u6708\u4eae",size:"1534 KB",type:"mp4"},2:{name:"\u86b5\u4ed4\u9eb5\u7dda",size:"34945 KB",type:"mp4"},3:{name:"\u8b93\u6d6a\u6f2b\u505a\u4e3b",size:"34912 KB",type:"mp4"},4:{name:"\u5154\u5b50",size:"10300 KB",type:"mp4"}},A=a(193),N=function(e){var t=e.value,a=e.onChange,n=e.style,r=i.a.useState(!1),o=Object(c.a)(r,2),s=o[0],d=o[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(I.a,{type:"text",variant:"outlined",value:t,style:Object(l.a)({},n),InputProps:{inputProps:{style:{padding:".5rem"}}},onClick:function(){return d(!0)},onChange:a,fullWidth:!0,InputLabelProps:{shrink:!0}}),i.a.createElement(S.a,{onClose:function(){return d(!1)},open:s},i.a.createElement(A.a,{color:t,onChangeComplete:function(e){a(e),d(!1)}})))},J=function(e){var t=e.activeLayer;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{display:"flex",marginTop:20}},i.a.createElement(I.a,{label:"Left",type:"text",variant:"outlined",value:t.left}),i.a.createElement(I.a,{label:"Top",type:"text",variant:"outlined",style:{marginLeft:20},value:t.top})),i.a.createElement("div",{style:{display:"flex",marginTop:20}},i.a.createElement(I.a,{label:"Width",type:"text",variant:"outlined",value:t.width}),i.a.createElement(I.a,{label:"Height",type:"text",variant:"outlined",style:{marginLeft:20},value:t.height})))},Y=function(e){var t=e.layers,a=e.setLayers,n=e.activeLayer,r=i.a.useState(!1),s=Object(c.a)(r,2),d=s[0],m=s[1];return i.a.createElement("div",null,i.a.createElement("h2",null,"Image Properties"),i.a.createElement(J,{activeLayer:n}),i.a.createElement(O.a,{variant:"contained",style:{marginTop:20},color:"primary",onClick:function(){return m(!0)}},"Open Media Libaray"),0!==n.data.id&&i.a.createElement("div",{style:{marginTop:20,display:"flex"}},i.a.createElement("img",{style:{maxHeight:100},alt:"Contemplative Reptile",src:"./assets/images/".concat(n.data.id,".jpg"),title:"Contemplative Reptile"}),i.a.createElement("div",{style:{marginLeft:20}},i.a.createElement("h3",{style:{marginTop:10}},"Name: ".concat(R("image",n.data.id).name)),i.a.createElement("h3",{style:{marginTop:10}},"Size: ".concat(R("image",n.data.id).size)),i.a.createElement("h3",{style:{marginTop:10}},"Type: ".concat(R("image",n.data.id).type)))),i.a.createElement(F,{type:"image",isDialogOpen:d,setDialogOpen:m,confirm:function(e){return function(e){var i=t.map((function(t){return t.id===n.id?Object(l.a)(Object(l.a)({},t),{},{data:Object(l.a)(Object(l.a)({},t.data),{},{id:e})}):Object(l.a)({},t)}));a(Object(o.a)(i))}(e)}}))},X=function(e){var t=e.layers,a=e.setLayers,n=e.activeLayer,r=i.a.useState(!1),s=Object(c.a)(r,2),d=s[0],m=s[1];return i.a.createElement("div",null,i.a.createElement("h2",null,"Video Properties"),i.a.createElement(J,{activeLayer:n}),i.a.createElement(O.a,{variant:"contained",style:{marginTop:20},color:"primary",onClick:function(){return m(!0)}},"Open Media Libaray"),0!==n.data.id&&i.a.createElement("div",{style:{marginTop:20,display:"flex"}},i.a.createElement("img",{style:{maxHeight:100},alt:"Contemplative Reptile",src:"./assets/previews/".concat(n.data.id,".jpg"),title:"Contemplative Reptile"}),i.a.createElement("div",{style:{marginLeft:20}},i.a.createElement("h3",{style:{marginTop:10}},"Name: ".concat(R("video",n.data.id).name)),i.a.createElement("h3",{style:{marginTop:10}},"Size: ".concat(R("video",n.data.id).size)),i.a.createElement("h3",{style:{marginTop:10}},"Type: ".concat(R("video",n.data.id).type)))),i.a.createElement(F,{type:"video",isDialogOpen:d,setDialogOpen:m,confirm:function(e){return function(e){var i=t.map((function(t){return t.id===n.id?Object(l.a)(Object(l.a)({},t),{},{data:Object(l.a)(Object(l.a)({},t.data),{},{id:e})}):Object(l.a)({},t)}));a(Object(o.a)(i))}(e)}}))},V=function(e){var t=e.board,a=e.setBoard,n=i.a.useState(!1),r=Object(c.a)(n,2),o=r[0],s=r[1];return i.a.createElement("div",null,i.a.createElement("h2",null,"Board Properties"),i.a.createElement("h3",{style:{margin:"16px 0"}},"Width: ".concat(t.width)),i.a.createElement("h3",{style:{margin:"16px 0"}},"Height: ".concat(t.height)),i.a.createElement("h3",{style:{marginTop:16,marginBottom:8}},"Background: "),i.a.createElement(D.a,{row:!0,"aria-label":"gender",name:"gender1",value:t.background.type,onChange:function(e){return a(Object(l.a)(Object(l.a)({},t),{},{background:Object(l.a)(Object(l.a)({},t.background),{},{type:e.target.value})}))}},i.a.createElement(T.a,{value:"color",control:i.a.createElement(M.a,null),label:"color"}),i.a.createElement(T.a,{value:"image",control:i.a.createElement(M.a,null),label:"image"})),"color"===t.background.type?i.a.createElement(N,{value:t.background.color,onChange:function(e){return a(Object(l.a)(Object(l.a)({},t),{},{background:Object(l.a)(Object(l.a)({},t.background),{},{color:e.hex})}))}}):i.a.createElement(O.a,{variant:"contained",color:"primary",onClick:function(){return s(!0)}},"Open Media Libaray"),"image"===t.background.type&&0!==t.background.imageId&&i.a.createElement("div",{style:{marginTop:20,display:"flex"}},i.a.createElement("img",{style:{maxHeight:100},alt:"Contemplative Reptile",src:"./assets/images/".concat(t.background.imageId,".jpg"),title:"Contemplative Reptile"}),i.a.createElement("div",{style:{marginLeft:20}},i.a.createElement("h3",{style:{marginTop:10}},"Name: ".concat(R("image",t.background.imageId).name)),i.a.createElement("h3",{style:{marginTop:10}},"Size: ".concat(R("image",t.background.imageId).size)),i.a.createElement("h3",{style:{marginTop:10}},"Type: ".concat(R("image",t.background.imageId).type)))),i.a.createElement(F,{type:"image",isDialogOpen:o,setDialogOpen:s,confirm:function(e){return a(Object(l.a)(Object(l.a)({},t),{},{background:Object(l.a)(Object(l.a)({},t.background),{},{imageId:e})}))}}))},q=function(e){var t=e.layers,a=e.setLayers,n=e.activeLayerID,r=e.board,o=e.setBoard,c=t.find((function(e){return e.id===n}))||{};return i.a.createElement("div",{style:{width:380,height:"calc(100vh - 80px)",backgroundColor:"#f1f3f7",padding:20}},c.data?{image:i.a.createElement(Y,{activeLayer:c,layers:t,setLayers:a}),video:i.a.createElement(X,{activeLayer:c,layers:t,setLayers:a})}[c.data.type]:i.a.createElement(V,{board:r,setBoard:o}))},G=a(191),Q=a.n(G),U=function(e){var t=e.layer;return i.a.createElement("video",{width:1.5*t.width,height:1.5*t.height,autoPlay:!0},i.a.createElement("source",{src:"./assets/videos/".concat(t.data.id,".mp4"),type:"video/mp4"}))},Z=function(e){var t=e.layer;return i.a.createElement("img",{src:"./assets/images/".concat(t.data.id,".jpg"),style:{width:1.5*t.width,height:1.5*t.height}})},$=function(e){var t=e.layer;return i.a.createElement("div",{style:{position:"absolute",width:1.5*t.width,height:1.5*t.height,top:1.5*t.top,left:1.5*t.left}},{image:i.a.createElement(Z,{layer:t}),video:i.a.createElement(U,{layer:t})}[t.data.type])},_=function(e){var t=e.isDialogOpen,a=e.setDialogOpen,n=e.layers,r=e.board;return i.a.createElement(S.a,{open:t,onClose:function(){return a(!1)},fullScreen:!0},i.a.createElement("div",{style:{width:"100%",height:"100%",position:"relative",background:"color"===r.background.type||0===r.background.imageId?r.background.color:"no-repeat center/100% url(./assets/images/".concat(r.background.imageId,".jpg)")}},n.map((function(e){return i.a.createElement($,{key:e.id,layer:e})})),i.a.createElement(p.a,{onClick:function(){return a(!1)}},i.a.createElement(Q.a,null))))},ee=a(192),te=a.n(ee),ae=function(e){var t=e.layers,a=e.board,n=i.a.useState(!1),r=Object(c.a)(n,2),o=r[0],l=r[1];return i.a.createElement("div",{style:{height:80,backgroundColor:"#f1f3f7",display:"flex",alignItems:"center",padding:"0 20px"}},i.a.createElement("h1",null,"Web Player"),i.a.createElement("div",{style:{flex:1}}),i.a.createElement(O.a,{variant:"contained",color:"primary",onClick:function(){return l(!0)}},i.a.createElement(te.a,null),"Play"),i.a.createElement(_,{isDialogOpen:o,setDialogOpen:l,layers:t,board:a}))},ne=function(){var e=i.a.useState([]),t=Object(c.a)(e,2),a=t[0],n=t[1],r=i.a.useState(),l=Object(c.a)(r,2),s=l[0],d=l[1],m=i.a.useState({width:window.innerWidth/1.5,height:window.innerHeight/1.5,background:{type:"color",color:"#f5f5f5",imageId:0}}),p=Object(c.a)(m,2),g=p[0],f=p[1];return i.a.createElement("div",{style:{width:"100%",height:"100vh",backgroundColor:"rgba(74,91,117,.1)"}},i.a.createElement(ae,{layers:a,board:g}),i.a.createElement("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"}},i.a.createElement(C,{addLayer:function(e){n([].concat(Object(o.a)(a),[{id:v()().unix(),width:100,height:100,top:0,left:0,data:{type:e,id:0}}]))}}),i.a.createElement("div",{style:{flex:1,padding:20,display:"flex",flexDirection:"column",alignItems:"center",height:"calc(100vh - 80px)"}},i.a.createElement(E,{layers:a,setLayers:n,activeLayerID:s,setActiveLayerID:d}),i.a.createElement("div",{style:{height:"100%",display:"flex",alignItems:"center"}},i.a.createElement(u,{board:g,layers:a,setLayers:n,activeLayerID:s,setActiveLayerID:d}))),i.a.createElement(q,{board:g,setBoard:f,layers:a,setLayers:n,activeLayerID:s})))},ie=(a(373),function(){return i.a.createElement(ne,null)});Object(r.render)(i.a.createElement(ie,null),document.getElementById("root"))}},[[206,1,2]]]);
//# sourceMappingURL=main.0cb75af5.chunk.js.map