{"version":3,"sources":["components/Anchor.js","components/Guide.js","components/layers/Text.js","components/layers/Time.js","medias.js","components/Layer.js","components/Board.js","components/ActionBar.js","components/ToolBar.js","components/MediaLibrary.js","components/ColorPicker.js","components/properties/Basic.js","components/properties/FontStyle.js","components/properties/TextAlign.js","components/properties/Text.js","components/properties/Time.js","components/ControlPanel.js","components/player/Text.js","components/player/Time.js","components/Player.js","components/Header.js","Editor.js","App.js","index.js"],"names":["cx","cy","board","position","offset","layer","React","useState","isMoving","setMoving","endDrag","current","removeEventListener","drag","e","x","offsetX","y","offsetY","onMouseDown","stopPropagation","addEventListener","r","stroke","fill","x1","y1","x2","y2","show","style","strokeWidth","editing","setEditing","finish","data","value","innerText","setInnerText","useEffect","document","getElementById","id","focus","left","top","width","height","userSelect","wordWrap","color","fontColor","undefined","backgroundColor","fontSize","fontWeight","fontStyle","textDecoration","textAlign","onDoubleClick","contentEditable","suppressContentEditableWarning","tabIndex","onInput","currentTarget","onBlur","isActivated","moment","format","clock","setClock","timeout","setInterval","clearInterval","display","alignItems","justifyContent","media","type","images","videos","1","name","size","2","3","4","setLayers","layers","activeLayerID","setActiveLayerID","start","setStart","tops","filter","l","map","bottoms","lefts","rights","layerXs","concat","layerYs","JSON","stringify","handleUpdateLayer","updatedLayer","startDrag","clientX","clientY","newLeft","newTop","newRight","newBottom","window","innerWidth","innerHeight","some","layerY","Math","abs","find","layerX","isGuideShow","onFocus","outline","includes","xlinkHref","onClick","baseOnWidth","originMediaWidth","originMediaHeight","layerWidth","layerHeight","updatedLayers","handleMediaSizeFitting","trim","length","Text","Time","Anchor","Guide","boardRef","useRef","xmlns","version","ref","background","imageId","preserveAspectRatio","key","activeLayer","IconButton","component","disabled","float","unix","props","handleMouseDown","addLayer","buttonStyle","padding","iconStyle","buttons","icon","flexDirection","button","Button","draggable","variant","isDialogOpen","setDialogOpen","close","confirm","selected","setSelected","card","maxHeight","margin","Dialog","open","onClose","fullWidth","maxWidth","DialogTitle","Divider","DialogContent","marginTop","flexWrap","border","alt","src","title","DialogActions","marginLeft","onChange","TextField","InputProps","inputProps","InputLabelProps","shrink","onChangeComplete","label","arr","push","initData","formats","setFormats","ToggleButtonGroup","event","newFormats","aria-label","ToggleButton","alignment","setAlignment","exclusive","newAlignment","Basic","marginBottom","multiline","target","minRows","marginRight","ColorPicker","hex","FontStyle","TextAlign","FormControl","Select","displayEmpty","MenuItem","BasicProperties","ImageProperties","MediaLibrary","insertImageFromLibrary","VideoProperties","insertVideoFromLibrary","BoardProperties","setBoard","floor","RadioGroup","row","FormControlLabel","control","Radio","overflow","VideoLayer","autoPlay","ImageLayer","Layer","fullScreen","href","borderRadius","flex","inputElement","createElement","setAttribute","click","onchange","evt","file","files","reader","FileReader","onload","a","parse","result","jsonData","console","log","readAsText","json","dataStr","dataUri","encodeURIComponent","linkElement","Player","dropRef","setType","isGrabing","setGrabing","greaterThanZero","num","Header","ToolBar","ActionBar","droppable","onDrop","preventDefault","offsetTop","offsetLeft","onDragOver","Board","ControlPanel","App","Editor","render"],"mappings":"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","file":"static/js/main.1b38f04e.chunk.js","sourcesContent":["import React from 'react'\n\nexport default ({ cx, cy, board, position, layer, offset }) => {\n  const [isMoving, setMoving] = React.useState(false)\n  const startDrag = e => {\n    e.stopPropagation()\n    setMoving(true)\n    board.current.addEventListener('mousemove', drag)\n    board.current.addEventListener('mouseup', endDrag)\n  }\n  const endDrag = () => {\n    board.current.removeEventListener('mousemove', drag)\n    if (isMoving) setMoving(false)\n  }\n  const drag = e => {\n    offset({ position, x: e.offsetX - cx, y: e.offsetY - cy })\n  }\n  return (\n    <circle\n      onMouseDown={startDrag}\n      cx={cx}\n      cy={cy}\n      r=\"4\"\n      stroke=\"#1592E6\"\n      fill=\"#FFFFFF\"\n    />\n  )\n}","import React from 'react'\nexport default ({ x1, y1, x2, y2, show }) => {\n  return (\n    <line x1={x1} y1={y1} x2={x2} y2={y2} style={{ stroke: '#90EE90', strokeWidth: show ? 1 : 0 }} />\n  )\n}","import React from 'react'\nexport default ({ layer, editing, setEditing, finish }) => {\n  const [innerText, setInnerText] = React.useState(layer.data.value || '')\n\n  React.useEffect(() => {\n    if (document.getElementById(`text_${layer.id}`)) document.getElementById(`text_${layer.id}`).focus()\n  }, [])\n  return (\n    <foreignObject\n      x={layer.left}\n      y={layer.top}\n      width={layer.width}\n      height={layer.height}\n    >\n      <div\n        style={{\n          width: '100%',\n          height: '100%',\n          userSelect: 'none',\n          wordWrap: 'break-word',\n          color: layer.data.fontColor ? layer.data.fontColor : undefined,\n          backgroundColor: layer.data.backgroundColor ? layer.data.backgroundColor : undefined,\n          fontSize: layer.data.fontSize ? layer.data.fontSize + 'px' : undefined,\n          fontWeight: layer.data.fontWeight,\n          fontStyle: layer.data.fontStyle,\n          textDecoration: layer.data.textDecoration,\n          textAlign: layer.data.textAlign\n        }}\n        onDoubleClick={() => setEditing(true)}\n      >\n        {\n          editing\n            ?\n            <div\n              id={`text_${layer.id}`}\n              contentEditable\n              suppressContentEditableWarning\n              tabIndex=\"-1\"\n              onInput={e => setInnerText(e.currentTarget.innerText)}\n              onBlur={() => {\n                setEditing(false)\n                if (typeof finish === 'function') finish(innerText)\n              }}\n              style={{\n                width: layer.width,\n                height: layer.height,\n              }}>\n              {layer.data.value}\n            </div>\n            :\n            layer.data.value\n        }\n      </div>\n    </foreignObject>\n  )\n}","import React from 'react'\nimport moment from 'moment'\nexport default ({ layer, isActivated }) => {\n  const [clock, setClock] = React.useState(moment().format(layer.data.value))\n  React.useEffect(() => {\n    let timeout = null\n    if (isActivated) {\n      setClock(moment().format(layer.data.value))\n      timeout = setInterval(() => setClock(moment().format(layer.data.value)), 1000)\n    }\n    return () => clearInterval(timeout)\n  }, [isActivated, layer])\n  return (\n    <foreignObject\n      x={layer.left}\n      y={layer.top}\n      width={layer.width}\n      height={layer.height}\n    >\n      <div style={{\n        width: '100%',\n        height: '100%',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: \"center\",\n        color: layer.data.fontColor ? layer.data.fontColor : undefined,\n        backgroundColor: layer.data.backgroundColor ? layer.data.backgroundColor : undefined,\n        fontSize: layer.data.fontSize ? layer.data.fontSize + 'px' : undefined,\n      }}>\n        {clock}\n      </div>\n    </foreignObject>\n  )\n}","export const media = (type, id) => ({\n  'image': images[id],\n  'video': videos[id],\n}[type])\nconst images = {\n  1: {\n    name: '擎天崗',\n    size: '127 KB',\n    type: 'jpg',\n    width: 133,\n    height: 100\n  },\n  2: {\n    name: 'Doughnuts',\n    size: '440 KB',\n    type: 'jpg',\n    width: 100,\n    height: 151\n  },\n  3: {\n    name: 'Food & Drink',\n    size: '3.7 MB',\n    type: 'jpg',\n    width: 149,\n    height: 100\n  },\n  4: {\n    name: 'West Virginia, USA',\n    size: '8 MB',\n    type: 'jpg',\n    width: 100,\n    height: 150\n  },\n}\nconst videos = {\n  1: {\n    name: '月亮',\n    size: '1.5 MB',\n    type: 'mp4',\n    width: 178,\n    height: 100\n  },\n  2: {\n    name: '空中的花朵',\n    size: '1.2 MB',\n    type: 'mp4',\n    width: 178,\n    height: 100\n  },\n  3: {\n    name: '溫室',\n    size: '8.7 MB',\n    type: 'mp4',\n    width: 178,\n    height: 100\n  },\n  4: {\n    name: '湖邊',\n    size: '11 MB',\n    type: 'mp4',\n    width: 178,\n    height: 100\n  },\n}","import React from 'react'\nimport Anchor from './Anchor'\nimport Guide from './Guide'\nimport TextLayer from './layers/Text'\nimport TimeLayer from './layers/Time'\nimport { media } from '../medias'\nexport default ({\n  layer,\n  board,\n  setLayers,\n  layers,\n  activeLayerID,\n  setActiveLayerID\n}) => {\n  const [start, setStart] = React.useState(null)\n  const [editing, setEditing] = React.useState(false)\n  const tops = layers.filter(l => l.id !== layer.id).map(l => l.top)\n  const bottoms = layers.filter(l => l.id !== layer.id).map(l => l.top + l.height)\n  const lefts = layers.filter(l => l.id !== layer.id).map(l => l.left)\n  const rights = layers.filter(l => l.id !== layer.id).map(l => l.left + l.width)\n  const layerXs = tops.concat(bottoms)\n  const layerYs = lefts.concat(rights)\n\n  React.useEffect(() => {\n    if (JSON.stringify(start) !== JSON.stringify({}) && start !== null) {\n      board.current.addEventListener('mousemove', drag)\n      board.current.addEventListener('mouseup', endDrag)\n    }\n  }, [start])\n  const handleUpdateLayer = updatedLayer => {\n    setLayers(layers.map(layer => {\n      if (layer.id === updatedLayer.id) return { ...updatedLayer }\n      else return { ...layer }\n    }))\n  }\n  const offset = ({ position, x, y }) => {\n    if (position === 'left-top')\n      handleUpdateLayer({\n        ...layer,\n        left: layer.left + x,\n        top: layer.top + y,\n        width: layer.width - x,\n        height: layer.height - y\n      })\n    if (position === 'right-top')\n      handleUpdateLayer({\n        ...layer,\n        top: layer.top + y,\n        width: layer.width + x,\n        height: layer.height - y\n      })\n    if (position === 'left-bottom')\n      handleUpdateLayer({\n        ...layer,\n        left: layer.left + x,\n        width: layer.width - x,\n        height: layer.height + y\n      })\n    if (position === 'right-bottom')\n      handleUpdateLayer({\n        ...layer,\n        width: layer.width + x,\n        height: layer.height + y\n      })\n  }\n  const startDrag = e => {\n    setStart({ left: e.clientX, top: e.clientY })\n  }\n  const endDrag = () => {\n    setStart({})\n    board.current.removeEventListener('mousemove', drag)\n  }\n  const drag = e => {\n    var newLeft = layer.left + e.x - start.left\n    var newTop = layer.top + e.y - start.top\n    var newRight = layer.left + e.x - start.left + layer.width\n    var newBottom = layer.top + e.y - start.top + layer.height\n    if (newLeft < 0) newLeft = 0\n    if (newTop < 0) newTop = 0\n    if (newRight > window.innerWidth / 1.5) newLeft = window.innerWidth / 1.5 - layer.width\n    if (newBottom > window.innerHeight / 1.5) newTop = window.innerHeight / 1.5 - layer.height\n    if (layerYs.some(layerY => Math.abs(layerY - newLeft) < 10)) {\n      newLeft = layerYs.find(layerY => Math.abs(layerY - newLeft) < 10)\n    }\n    if (layerXs.some(layerX => Math.abs(layerX - newTop) < 10)) {\n      newTop = layerXs.find(layerX => Math.abs(layerX - newTop) < 10)\n    }\n    if (layerYs.some(layerY => Math.abs(layerY - newRight) < 10)) {\n      newLeft = layerYs.find(layerY => Math.abs(layerY - newRight) < 10) - layer.width\n    }\n    if (layerXs.some(layerX => Math.abs(layerX - newBottom) < 10)) {\n      newTop = layerXs.find(layerX => Math.abs(layerX - newBottom) < 10) - layer.height\n    }\n    handleUpdateLayer({\n      ...layer,\n      left: newLeft,\n      top: newTop\n    })\n  }\n  const isGuideShow = (name) => {\n    if (name === 'top') {\n      return layerXs.some(layerX => Math.abs(layerX - layer.top) < 10)\n    }\n    if (name === 'bottom') {\n      return layerXs.some(layerX => Math.abs(layerX - layer.top - layer.height) < 10)\n    }\n    if (name === 'left') {\n      return layerYs.some(layerY => Math.abs(layerY - layer.left) < 10)\n    }\n    if (name === 'right') {\n      return layerYs.some(layerY => Math.abs(layerY - layer.left - layer.width) < 10)\n    }\n  }\n  const handleMediaSizeFitting = layer => {\n    const baseOnWidth = layer.width / layer.height > 1\n    const originMediaWidth = media(layer.data.type, layer.data.id).width\n    const originMediaHeight = media(layer.data.type, layer.data.id).height\n    const layerWidth = baseOnWidth ? layer.width : originMediaWidth * layer.height / originMediaHeight\n    const layerHeight = baseOnWidth ? originMediaHeight * layer.width / originMediaWidth : layer.height\n    const updatedLayers = layers.map(y => {\n      return y.id === activeLayerID\n        ? {\n          ...y,\n          width: layerWidth,\n          height: layerHeight\n        }\n        : { ...y }\n    })\n    setLayers([...updatedLayers])\n  }\n  return (\n    <g\n      onFocus={() => setActiveLayerID(layer.id)}\n      // onBlur={() => setActiveLayerID({})}\n      style={{ outline: 'none' }}\n      tabIndex=\"-1\"\n      onMouseDown={startDrag}\n    >\n      <rect\n        style={{\n          fill: 'transparent',\n          stroke: layer.id === activeLayerID ? '#bebebe' : undefined,\n          strokeWidth: layer.id === activeLayerID ? 1 : 0\n        }}\n        x={layer.left}\n        y={layer.top}\n        width={layer.width}\n        height={layer.height}\n      />\n      {\n        ['image', 'video'].includes(layer.data.type) &&\n        <image\n          xlinkHref={{\n            'image': `./assets/images/${layer.data.id}.jpg`,\n            'video': `./assets/previews/${layer.data.id}.jpg`,\n          }[layer.data.type]}\n          x={layer.left}\n          y={layer.top}\n          width={layer.width}\n          height={layer.height}\n          onMouseDown={startDrag}\n        />\n      }\n      {\n        ['image', 'video'].includes(layer.data.type) &&\n        layer.data.id > 0 &&\n        <>\n          <image\n            xlinkHref={{\n              'image': `./assets/images/0.jpg`,\n              'video': `./assets/previews/0.jpg`,\n            }[layer.data.type]}\n            x={layer.left + 10}\n            y={layer.top + 10}\n            width={20}\n            height={20}\n          />\n          {layer.id === activeLayerID && <image\n            xlinkHref={`./assets/tools/fit.jpg`}\n            x={layer.left + layer.width - 30}\n            y={layer.top + layer.height - 30}\n            width={20}\n            height={20}\n            onClick={() => handleMediaSizeFitting(layer)}\n          />}\n        </>\n      }\n      {\n        (!editing &&\n          ['text', 'time'].includes(layer.data.type) &&\n          layer.data.value.trim().length === 0) &&\n        <image\n          xlinkHref={`./assets/tools/${layer.data.type}.jpg`}\n          x={layer.left}\n          y={layer.top}\n          width={layer.width}\n          height={layer.height}\n          onMouseDown={startDrag}\n          onDoubleClick={() => layer.data.type === 'text' ? setEditing(true) : {}}\n        />\n      }\n      {\n        (\n          editing ||\n          ['text', 'time'].includes(layer.data.type) &&\n          layer.data.value.trim().length > 0\n        ) &&\n        {\n          'text': <TextLayer\n            layer={layer}\n            editing={editing}\n            setEditing={setEditing}\n            finish={value => handleUpdateLayer({\n              ...layer,\n              data: {\n                ...layer.data,\n                value\n              }\n            })}\n          />,\n          'time': <TimeLayer\n            layer={layer}\n            isActivated={layer.id === activeLayerID}\n          />,\n        }[layer.data.type]\n      }\n      {layer.id === activeLayerID && <>\n        <Anchor\n          position=\"left-top\"\n          board={board}\n          cx={layer.left}\n          cy={layer.top}\n          layer={layer}\n          offset={offset}\n        />\n        <Anchor\n          position=\"right-top\"\n          board={board}\n          cx={layer.left + layer.width}\n          cy={layer.top}\n          layer={layer}\n          offset={offset}\n        />\n        <Anchor\n          position=\"left-bottom\"\n          board={board}\n          cx={layer.left}\n          cy={layer.top + layer.height}\n          layer={layer}\n          offset={offset}\n        />\n        <Anchor\n          position=\"right-bottom\"\n          board={board}\n          cx={layer.left + layer.width}\n          cy={layer.top + layer.height}\n          layer={layer}\n          offset={offset}\n        />\n        <Guide x1={layer.left - 100} y1={layer.top} x2={layer.left + layer.width + 100} y2={layer.top} show={isGuideShow('top')} />\n        <Guide x1={layer.left - 100} y1={layer.top + layer.height} x2={layer.left + layer.width + 100} y2={layer.top + layer.height} show={isGuideShow('bottom')} />\n        <Guide x1={layer.left} y1={layer.top - 100} x2={layer.left} y2={layer.top + layer.height + 100} show={isGuideShow('left')} />\n        <Guide x1={layer.left + layer.width} y1={layer.top - 100} x2={layer.left + layer.width} y2={layer.top + layer.height + 100} show={isGuideShow('right')} />\n      </>}\n    </g>\n  )\n}","import React from 'react'\nimport Layer from './Layer'\nexport default ({ layers, setLayers, activeLayerID, setActiveLayerID, board }) => {\n  const boardRef = React.useRef()\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\"\n      version=\"1.1\"\n      width={board.width}\n      height={board.height}\n      ref={boardRef}\n      // stroke=\"#f5f5f5\"\n    >\n      {\n        board.background.type === 'color'\n          ?\n          <rect\n            width={board.width}\n            height={board.height} x=\"0\" y=\"0\" fill={board.background.color}\n            onClick={() => setActiveLayerID()}\n          />\n          :\n          board.background.imageId === 0\n            ?\n            <rect\n              width={board.width}\n              height={board.height} x=\"0\" y=\"0\" fill={board.background.color}\n              onClick={() => setActiveLayerID()}\n            />\n            :\n            <image\n              xlinkHref={`./assets/images/${board.background.imageId}.jpg`}\n              x=\"0\"\n              y=\"0\"\n              width={board.width}\n              height={board.height}\n              preserveAspectRatio=\"xMidYMid slice\"\n              onClick={() => setActiveLayerID()}\n            />\n      }\n      {\n        layers\n          .map(layer =>\n            <Layer\n              activeLayerID={activeLayerID}\n              setActiveLayerID={setActiveLayerID}\n              key={layer.id}\n              layer={layer}\n              layers={layers}\n              setLayers={setLayers}\n              board={boardRef}\n            />)\n      }\n    </svg>\n  )\n}","import React from 'react'\nimport { IconButton, Paper } from '@material-ui/core'\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\nimport moment from 'moment'\nexport default ({ layers, setLayers, activeLayerID, setActiveLayerID }) => {\n  const activeLayer = layers.find(layer => layer.id === activeLayerID) || {}\n  return (\n    <div style={{ width: '100%', backgroundColor: 'rgb(241, 243, 247)' }}>\n      <IconButton color=\"primary\" component=\"span\"\n        disabled={!activeLayerID}\n        style={{ float: 'right' }}\n        onClick={() => {\n          setLayers([...layers.filter(layer => layer.id !== activeLayerID)])\n          setActiveLayerID()\n        }}>\n        <DeleteIcon />\n      </IconButton>\n      <IconButton color=\"primary\" component=\"span\"\n        disabled={!activeLayerID}\n        style={{ float: 'right' }}\n        onClick={() => {\n          let id = moment().unix()\n          setLayers([...layers, { ...activeLayer, id , left: activeLayer.left + 20, top: activeLayer.top + 20 }])\n          setActiveLayerID(id)\n        }}>\n        <FileCopyIcon />\n      </IconButton>\n    </div>\n  )\n}","import React from 'react'\nimport { Button } from '@material-ui/core'\nimport Image from '@material-ui/icons/Image';\nimport Theaters from '@material-ui/icons/Theaters';\nimport Clock from '@material-ui/icons/AccessTime';\nexport default props => {\n  const { handleMouseDown, addLayer } = props\n  const buttonStyle = {\n    padding: 5,\n    padding: 5,\n    marginTop: 20,\n    backgroundColor: 'white'\n  };\n  const iconStyle = {\n    height: 52,\n    width: 52\n  };\n  const buttons = [\n    { type: 'image', icon: <Image style={{ ...iconStyle }} /> },\n    { type: 'video', icon: <Theaters style={{ ...iconStyle }} /> },\n    // { type: 'text', icon: <TextFields style={{ ...iconStyle }} /> },\n    { type: 'time', icon: <Clock style={{ ...iconStyle }} /> }\n  ]\n  return (\n    <div style={{\n      width: 104,\n      height: 'calc(100vh - 80px)',\n      backgroundColor: '#f1f3f7',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center'\n    }}>\n      {\n        buttons.map(button =>\n          <Button key={button.type}\n            draggable=\"true\"\n            variant=\"outlined\"\n            color=\"primary\"\n            onClick={() => addLayer(button.type)}\n            onMouseDown={() => handleMouseDown(button.type)}\n            style={{ ...buttonStyle }}>\n            {button.icon}\n          </Button>\n        )\n      }\n    </div>\n  )\n}","import React from 'react'\nimport {\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Divider,\n  Button,\n} from '@material-ui/core'\nexport default ({ isDialogOpen, setDialogOpen, close, type, confirm }) => {\n  const [selected, setSelected] = React.useState()\n  const card = {\n    maxHeight: 90,\n    margin: 10\n  }\n  const handleClose = () => {\n    if (typeof close === 'function') close()\n    setDialogOpen(false)\n  }\n  const handleConfirm = e => {\n    if (typeof confirm === 'function') confirm(selected)\n    setDialogOpen(false)\n  }\n  return (\n    <Dialog\n      open={isDialogOpen}\n      onClose={handleClose}\n      fullWidth\n      maxWidth=\"sm\"\n    >\n      <DialogTitle>\n        {`Media Library > ${type}`}\n      </DialogTitle>\n\n      <Divider />\n      <DialogContent>\n        <div style={{\n          width: '100%', height: 240, backgroundColor: 'rgba(74, 91, 117, 0.1', marginTop: 16, display: 'flex',\n          flexWrap: 'wrap'\n        }}>\n          {\n            [1, 2, 3, 4].map(id => <img\n              key={id}\n              style={{\n                ...card,\n                border: `3px solid ${selected === id ? '#3f51b5' : 'transparent'}`\n              }}\n              onClick={() => {\n                setSelected(id)\n              }}\n              alt=\"Contemplative Reptile\"\n              src={{\n                'image': `./assets/images/${id}.jpg`,\n                'video': `./assets/previews/${id}.jpg`,\n              }[type]}\n              title=\"Contemplative Reptile\"\n            />)\n          }\n        </div>\n      </DialogContent>\n      <DialogActions>\n        <Button variant=\"contained\" onClick={() => setDialogOpen(false)}>Cancel</Button>\n        <Button variant=\"contained\" style={{ marginLeft: 20 }} color=\"primary\" disabled={!selected} onClick={handleConfirm}>Confirm</Button>\n      </DialogActions>\n    </Dialog>\n  )\n}","import React from 'react'\nimport { SketchPicker } from 'react-color'\nimport { TextField, Dialog } from '@material-ui/core'\nexport default ({ value, onChange, style, disabled }) => {\n  const [isDialogOpen, setDialogOpen] = React.useState(false)\n  const handleComplete = e => {\n    onChange(e)\n    setDialogOpen(false)\n  }\n  return (\n    <>\n      <TextField\n        type=\"text\"\n        variant=\"outlined\"\n        value={value}\n        style={{ ...style }}\n        InputProps={{ inputProps: { style: { padding: '.5rem' } } }}\n        onClick={() => disabled ? {} : setDialogOpen(true)}\n        onChange={onChange}\n        fullWidth\n        disabled={disabled}\n        InputLabelProps={{\n          shrink: true,\n        }} />\n\n      <Dialog\n        onClose={() => setDialogOpen(false)}\n        open={isDialogOpen}\n      >\n        <SketchPicker\n          color={value}\n          onChangeComplete={handleComplete} />\n      </Dialog>\n    </>\n  )\n\n}","import React from 'react'\nimport {\n  TextField,\n} from '@material-ui/core'\nexport default ({ activeLayer }) => {\n  return (\n    <>\n      <div style={{ display: 'flex', marginTop: 20 }}>\n        <TextField\n          label=\"Left\"\n          type=\"text\"\n          variant=\"outlined\"\n          value={activeLayer.left}\n        />\n        <TextField\n          label=\"Top\"\n          type=\"text\"\n          variant=\"outlined\"\n          style={{ marginLeft: 20 }}\n          value={activeLayer.top}\n        />\n      </div>\n      <div style={{ display: 'flex', marginTop: 20 }}>\n        <TextField\n          label=\"Width\"\n          type=\"text\"\n          variant=\"outlined\"\n          value={activeLayer.width}\n        />\n        <TextField\n          label=\"Height\"\n          type=\"text\"\n          variant=\"outlined\"\n          style={{ marginLeft: 20 }}\n          value={activeLayer.height}\n        />\n      </div>\n    </>\n  )\n}","import React from 'react';\nimport FormatBoldIcon from '@material-ui/icons/FormatBold';\nimport FormatItalicIcon from '@material-ui/icons/FormatItalic';\nimport FormatUnderlinedIcon from '@material-ui/icons/FormatUnderlined';\nimport ToggleButton from '@material-ui/lab/ToggleButton';\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\n\nconst initData = (data) => {\n  let arr = [];\n  if (data.textDecoration === 'underline') arr.push('underlined')\n  if (data.fontStyle === 'italic') arr.push('italic')\n  if (data.fontWeight === 'bold') arr.push('bold')\n  return arr\n}\n\nexport default ({ layers, setLayers, activeLayer }) => {\n  const [formats, setFormats] = React.useState(initData(activeLayer.data));\n\n  const handleFormat = (event, newFormats) => {\n    setFormats(newFormats);\n    const updatedLayers = layers.map(layer => {\n      return layer.id === activeLayer.id\n        ? {\n          ...layer,\n          data: {\n            ...layer.data,\n            textDecoration: newFormats.includes('underlined') ? 'underline' : 'none',\n            fontStyle: newFormats.includes('italic') ? 'italic' : 'normal',\n            fontWeight: newFormats.includes('bold') ? 'bold' : 'normal',\n          }\n        }\n        : { ...layer }\n    })\n    setLayers([...updatedLayers])\n  };\n\n  return (\n    <ToggleButtonGroup value={formats} onChange={handleFormat} aria-label=\"text formatting\">\n      <ToggleButton value=\"bold\" aria-label=\"bold\">\n        <FormatBoldIcon />\n      </ToggleButton>\n      <ToggleButton value=\"italic\" aria-label=\"italic\">\n        <FormatItalicIcon />\n      </ToggleButton>\n      <ToggleButton value=\"underlined\" aria-label=\"underlined\">\n        <FormatUnderlinedIcon />\n      </ToggleButton>\n    </ToggleButtonGroup>\n  );\n}","import React from 'react';\nimport FormatAlignLeftIcon from '@material-ui/icons/FormatAlignLeft';\nimport FormatAlignCenterIcon from '@material-ui/icons/FormatAlignCenter';\nimport FormatAlignRightIcon from '@material-ui/icons/FormatAlignRight';\nimport FormatAlignJustifyIcon from '@material-ui/icons/FormatAlignJustify';\nimport ToggleButton from '@material-ui/lab/ToggleButton';\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\n\nexport default ({ layers, setLayers, activeLayer }) => {\n\n  const [alignment, setAlignment] = React.useState(activeLayer.data.textAlign || 'left');\n\n  const handleAlignment = (event, newAlignment) => {\n    setAlignment(newAlignment);\n    const updatedLayers = layers.map(layer => {\n      return layer.id === activeLayer.id\n        ? {\n          ...layer,\n          data: {\n            ...layer.data,\n            textAlign: newAlignment\n          }\n        }\n        : { ...layer }\n    })\n    setLayers([...updatedLayers])\n  };\n\n  return (\n    <ToggleButtonGroup\n      value={alignment}\n      exclusive\n      onChange={handleAlignment}\n      aria-label=\"text alignment\"\n    >\n      <ToggleButton value=\"left\" aria-label=\"left aligned\">\n        <FormatAlignLeftIcon />\n      </ToggleButton>\n      <ToggleButton value=\"center\" aria-label=\"centered\">\n        <FormatAlignCenterIcon />\n      </ToggleButton>\n      <ToggleButton value=\"right\" aria-label=\"right aligned\">\n        <FormatAlignRightIcon />\n      </ToggleButton>\n    </ToggleButtonGroup>\n  );\n}","import React from 'react'\nimport {\n  TextField,\n} from '@material-ui/core'\nimport BasicProperties from './Basic'\nimport FontStyle from './FontStyle'\nimport TextAlign from './TextAlign'\nimport ColorPicker from '../ColorPicker'\nexport default ({ layers, setLayers, activeLayer }) => {\n  const handleUpdateLayer = (key, value) => {\n    const updatedLayers = layers.map(layer => {\n      return layer.id === activeLayer.id\n        ? { ...layer, data: { ...layer.data, [key]: value } }\n        : { ...layer }\n    })\n    setLayers([...updatedLayers])\n  }\n  return (\n    <div>\n      <h2>Text Properties</h2>\n      <BasicProperties activeLayer={activeLayer} />\n      <h3 style={{ marginTop: 20, marginBottom: 10 }}>Text Content</h3>\n      <TextField\n        fullWidth\n        multiline\n        variant=\"outlined\"\n        value={activeLayer.data.value}\n        onChange={e => handleUpdateLayer('value', e.target.value)}\n        minRows={5}\n      />\n      <h3 style={{ marginTop: 20, marginBottom: 10 }}>Font Properties</h3>\n      <div style={{ display: 'flex', alignItems: 'center' }}>\n        <span style={{ marginRight: 10 }}>Color:</span>\n        <ColorPicker\n          value={activeLayer.data.fontColor || '#000000'}\n          disabled={activeLayer.data.value.trim().length === 0}\n          onChange={color => handleUpdateLayer('fontColor', color.hex)}\n        />\n        <span style={{ marginLeft: 20, marginRight: 10 }}>Size:</span>\n        <TextField\n          type=\"number\"\n          variant=\"outlined\"\n          disabled={activeLayer.data.value.trim().length === 0}\n          InputProps={{ inputProps: { style: { padding: '.5rem' } } }}\n          value={activeLayer.data.fontSize || 14}\n          onChange={e => handleUpdateLayer('fontSize', e.target.value)}\n        />\n      </div>\n      <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: 10 }}>\n        <FontStyle\n          layers={layers}\n          setLayers={setLayers}\n          activeLayer={activeLayer}\n        />\n        <TextAlign\n          layers={layers}\n          setLayers={setLayers}\n          activeLayer={activeLayer}\n        />\n      </div>\n    </div>\n  )\n}","import React from 'react'\nimport {\n  TextField,\n  MenuItem,\n  Select,\n  FormControl,\n  InputLabel\n} from '@material-ui/core'\nimport BasicProperties from './Basic'\nimport ColorPicker from '../ColorPicker'\nexport default ({ layers, setLayers, activeLayer }) => {\n  const handleUpdateLayer = (key, value) => {\n    const updatedLayers = layers.map(layer => {\n      return layer.id === activeLayer.id\n        ? { ...layer, data: { ...layer.data, [key]: value } }\n        : { ...layer }\n    })\n    setLayers([...updatedLayers])\n  }\n  return (\n    <div>\n      <h2>Time Properties</h2>\n      <BasicProperties activeLayer={activeLayer} />\n      <h3 style={{ marginTop: 20, marginBottom: 10 }}>Format</h3>\n      <FormControl variant=\"outlined\" fullWidth >\n        <Select\n          value={activeLayer.data.value}\n          onChange={e => handleUpdateLayer('value', e.target.value)}\n          displayEmpty\n        >\n          <MenuItem value={''}>Empty</MenuItem>\n          <MenuItem value={'YYYY/MM/DD HH:mm:ss'}>YYYY/MM/DD HH:mm:ss</MenuItem>\n          <MenuItem value={'YYYY/MM/DD hh:mm:ss a'}>YYYY/MM/DD hh:mm:ss a</MenuItem>\n          <MenuItem value={'HH:mm:ss'}>HH:mm:ss</MenuItem>\n          <MenuItem value={'hh:mm:ss a'}>hh:mm:ss a</MenuItem>\n        </Select>\n      </FormControl>\n      <h3 style={{ marginTop: 20, marginBottom: 10 }}>Font Properties</h3>\n      <div style={{ display: 'flex', alignItems: 'center' }}>\n        <span style={{ marginRight: 10 }}>Color:</span>\n        <ColorPicker\n          value={activeLayer.data.fontColor || '#000000'}\n          disabled={activeLayer.data.value.trim().length === 0}\n          onChange={color => handleUpdateLayer('fontColor', color.hex)}\n        />\n        <span style={{ marginLeft: 20, marginRight: 10 }}>Size:</span>\n        <TextField\n          type=\"number\"\n          variant=\"outlined\"\n          disabled={activeLayer.data.value.trim().length === 0}\n          InputProps={{ inputProps: { style: { padding: '.5rem' } } }}\n          value={activeLayer.data.fontSize || 14}\n          onChange={e => handleUpdateLayer('fontSize', e.target.value)}\n        />\n      </div>\n      {/* <h3 style={{ marginTop: 20, marginBottom: 10 }}>Background Properties</h3>\n      <div style={{ display: 'flex', alignItems: 'center' }}>\n        <span style={{ marginRight: 10 }}>Color:</span>\n        <ColorPicker\n          value={activeLayer.data.backgroundColor || '#f5f5f5'}\n          disabled={activeLayer.data.value.trim().length === 0}\n          onChange={color => handleUpdateLayer('backgroundColor', color.hex)}\n        />\n      </div> */}\n    </div>\n  )\n}","import React from 'react'\nimport {\n  TextField,\n  Button,\n  Radio,\n  RadioGroup,\n  FormControlLabel\n} from '@material-ui/core'\nimport MediaLibrary from './MediaLibrary'\nimport { media } from '../medias'\nimport ColorPicker from './ColorPicker'\nimport TextProperties from './properties/Text'\nimport TimeProperties from './properties/Time'\nconst BasicProperties = ({ activeLayer }) => {\n  return (\n    <>\n      <div style={{ display: 'flex', marginTop: 20 }}>\n        <TextField\n          label=\"Left\"\n          type=\"text\"\n          variant=\"outlined\"\n          value={activeLayer.left}\n        />\n        <TextField\n          label=\"Top\"\n          type=\"text\"\n          variant=\"outlined\"\n          style={{ marginLeft: 20 }}\n          value={activeLayer.top}\n        />\n      </div>\n      <div style={{ display: 'flex', marginTop: 20 }}>\n        <TextField\n          label=\"Width\"\n          type=\"text\"\n          variant=\"outlined\"\n          value={activeLayer.width}\n        />\n        <TextField\n          label=\"Height\"\n          type=\"text\"\n          variant=\"outlined\"\n          style={{ marginLeft: 20 }}\n          value={activeLayer.height}\n        />\n      </div>\n    </>\n  )\n}\nconst ImageProperties = ({ layers, setLayers, activeLayer }) => {\n  const [isDialogOpen, setDialogOpen] = React.useState(false)\n  const insertImageFromLibrary = id => {\n    // media('image', activeLayer.data.id).name\n    const updatedLayers = layers.map(layer => {\n      return layer.id === activeLayer.id\n        ? {\n          ...layer,\n          width: media('image', id).width,\n          height: media('image', id).height,\n          data: { ...layer.data, id }\n        }\n        : { ...layer }\n    })\n    setLayers([...updatedLayers])\n  }\n  return (\n    <div>\n      <h2>Image Properties</h2>\n      <BasicProperties activeLayer={activeLayer} />\n      <Button variant=\"contained\" style={{ marginTop: 20 }} color=\"primary\" onClick={() => setDialogOpen(true)}>Open Media Libaray</Button>\n      {\n        activeLayer.data.id !== 0 && <div style={{\n          marginTop: 20,\n          display: 'flex'\n        }}>\n          <img\n            style={{\n              maxHeight: 100\n            }}\n            alt=\"Contemplative Reptile\"\n            src={`./assets/images/${activeLayer.data.id}.jpg`}\n            title=\"Contemplative Reptile\"\n          />\n          <div style={{ marginLeft: 20 }}>\n            <h3 style={{ marginTop: 10 }}>{`Name: ${media('image', activeLayer.data.id).name}`}</h3>\n            <h3 style={{ marginTop: 10 }}>{`Size: ${media('image', activeLayer.data.id).size}`}</h3>\n            <h3 style={{ marginTop: 10 }}>{`Type: ${media('image', activeLayer.data.id).type}`}</h3>\n          </div>\n        </div>\n      }\n      <MediaLibrary\n        type=\"image\"\n        isDialogOpen={isDialogOpen}\n        setDialogOpen={setDialogOpen}\n        confirm={id => insertImageFromLibrary(id)}\n      />\n    </div>\n  )\n}\nconst VideoProperties = ({ layers, setLayers, activeLayer }) => {\n  const [isDialogOpen, setDialogOpen] = React.useState(false)\n  const insertVideoFromLibrary = id => {\n    const updatedLayers = layers.map(layer => {\n      return layer.id === activeLayer.id\n        ? {\n          ...layer,\n          width: media('video', id).width,\n          height: media('video', id).height,\n          data: { ...layer.data, id }\n        }\n        : { ...layer }\n    })\n    setLayers([...updatedLayers])\n  }\n  return (\n    <div>\n      <h2>Video Properties</h2>\n      <BasicProperties activeLayer={activeLayer} />\n      <Button variant=\"contained\" style={{ marginTop: 20 }} color=\"primary\" onClick={() => setDialogOpen(true)}>Open Media Libaray</Button>\n      {\n        activeLayer.data.id !== 0 && <div style={{\n          marginTop: 20,\n          display: 'flex'\n        }}>\n          <img\n            style={{\n              maxHeight: 100\n            }}\n            alt=\"Contemplative Reptile\"\n            src={`./assets/previews/${activeLayer.data.id}.jpg`}\n            title=\"Contemplative Reptile\"\n          />\n          <div style={{ marginLeft: 20 }}>\n            <h3 style={{ marginTop: 10 }}>{`Name: ${media('video', activeLayer.data.id).name}`}</h3>\n            <h3 style={{ marginTop: 10 }}>{`Size: ${media('video', activeLayer.data.id).size}`}</h3>\n            <h3 style={{ marginTop: 10 }}>{`Type: ${media('video', activeLayer.data.id).type}`}</h3>\n          </div>\n        </div>\n      }\n      <MediaLibrary\n        type=\"video\"\n        isDialogOpen={isDialogOpen}\n        setDialogOpen={setDialogOpen}\n        confirm={id => insertVideoFromLibrary(id)}\n      />\n    </div>\n  )\n}\nconst BoardProperties = ({ board, setBoard }) => {\n  const [isDialogOpen, setDialogOpen] = React.useState(false)\n\n  return (\n    <div>\n      <h2>Board Properties</h2>\n      <h3 style={{ margin: '16px 0' }}>{`Width: ${Math.floor(board.width)}`}</h3>\n      <h3 style={{ margin: '16px 0' }}>{`Height: ${Math.floor(board.height)}`}</h3>\n      <h3 style={{ marginTop: 16, marginBottom: 8 }}>Background: </h3>\n      <RadioGroup row aria-label=\"gender\" name=\"gender1\" value={board.background.type} onChange={e => setBoard({\n        ...board,\n        background: {\n          ...board.background,\n          type: e.target.value\n        }\n      })}>\n        <FormControlLabel value=\"color\" control={<Radio color=\"primary\" />} label=\"color\" />\n        <FormControlLabel value=\"image\" control={<Radio color=\"primary\" />} label=\"image\" />\n      </RadioGroup>\n      {\n        board.background.type === 'color'\n          ?\n          <ColorPicker\n            value={board.background.color}\n            onChange={color => setBoard({\n              ...board,\n              background: {\n                ...board.background,\n                color: color.hex\n              }\n            })}\n          />\n          :\n          <Button variant=\"contained\" color=\"primary\" onClick={() => setDialogOpen(true)}>Open Media Libaray</Button>\n      }\n      {\n        (board.background.type === 'image' && board.background.imageId !== 0) && <div style={{\n          marginTop: 20,\n          display: 'flex'\n        }}>\n          <img\n            style={{\n              maxHeight: 100\n            }}\n            alt=\"Contemplative Reptile\"\n            src={`./assets/images/${board.background.imageId}.jpg`}\n            title=\"Contemplative Reptile\"\n          />\n          <div style={{ marginLeft: 20 }}>\n            <h3 style={{ marginTop: 10 }}>{`Name: ${media('image', board.background.imageId).name}`}</h3>\n            <h3 style={{ marginTop: 10 }}>{`Size: ${media('image', board.background.imageId).size}`}</h3>\n            <h3 style={{ marginTop: 10 }}>{`Type: ${media('image', board.background.imageId).type}`}</h3>\n          </div>\n        </div>\n      }\n      <MediaLibrary\n        type=\"image\"\n        isDialogOpen={isDialogOpen}\n        setDialogOpen={setDialogOpen}\n        confirm={id => setBoard({\n          ...board,\n          background: {\n            ...board.background,\n            imageId: id\n          }\n        })}\n      />\n    </div>\n  )\n}\nexport default ({ layers, setLayers, activeLayerID, board, setBoard }) => {\n  const activeLayer = layers.find(layer => layer.id === activeLayerID) || {}\n  return (\n    <div style={{\n      width: 380,\n      height: 'calc(100vh - 80px)',\n      backgroundColor: '#f1f3f7',\n      padding: 20\n    }}>\n      {\n        activeLayer.data ? {\n          'image': <ImageProperties activeLayer={activeLayer} layers={layers} setLayers={setLayers} />,\n          'video': <VideoProperties activeLayer={activeLayer} layers={layers} setLayers={setLayers} />,\n          'text': <TextProperties activeLayer={activeLayer} layers={layers} setLayers={setLayers} />,\n          'time': <TimeProperties activeLayer={activeLayer} layers={layers} setLayers={setLayers} />,\n        }[activeLayer.data.type]\n          : <BoardProperties board={board} setBoard={setBoard} />\n      }\n\n    </div>\n  )\n}","import React from 'react'\nexport default ({ layer }) => {\n  const zoom = 1.5\n  return (\n    <div\n      style={{\n        width: layer.width * zoom,\n        height: layer.height * zoom,\n        wordWrap: 'break-word',\n        overflow: 'hidden',\n        color: layer.data.fontColor ? layer.data.fontColor : undefined,\n        backgroundColor: layer.data.backgroundColor ? layer.data.backgroundColor : undefined,\n        fontSize: layer.data.fontSize ? layer.data.fontSize * zoom + 'px' : 14 * zoom,\n        fontWeight: layer.data.fontWeight,\n        fontStyle: layer.data.fontStyle,\n        textDecoration: layer.data.textDecoration,\n        textAlign: layer.data.textAlign\n      }}\n    >\n      {layer.data.value}\n    </div>\n  )\n}","import React from 'react'\nimport moment from 'moment'\nexport default ({ layer }) => {\n  const zoom = 1.5\n  const [clock, setClock] = React.useState(moment().format(layer.data.value))\n  React.useEffect(() => {\n    let timeout = null\n    setClock(moment().format(layer.data.value))\n    timeout = setInterval(() => setClock(moment().format(layer.data.value)), 1000)\n    return () => clearInterval(timeout)\n  }, [])\n  return (\n    <div\n      style={{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        width: layer.width * zoom,\n        height: layer.height * zoom,\n        color: layer.data.fontColor ? layer.data.fontColor : undefined,\n        backgroundColor: layer.data.backgroundColor ? layer.data.backgroundColor : undefined,\n        fontSize: layer.data.fontSize ? layer.data.fontSize * zoom + 'px' : 14 * zoom\n      }}\n    >\n      {clock}\n    </div>\n  )\n}","import React from 'react'\nimport {\n  Dialog,\n  IconButton\n} from '@material-ui/core'\nimport CloseIcon from '@material-ui/icons/Close';\nimport TextPlayer from './player/Text'\nimport TimePlayer from './player/Time'\nconst VideoLayer = ({ layer }) => {\n  const zoom = 1.5\n  return (\n    <video width={layer.width * zoom} height={layer.height * zoom} autoPlay>\n      <source src={`./assets/videos/${layer.data.id}.mp4`} type=\"video/mp4\" />\n    </video>\n  )\n}\nconst ImageLayer = ({ layer }) => {\n  const zoom = 1.5\n  return (\n    <img\n      src={`./assets/images/${layer.data.id}.jpg`}\n      style={{\n        width: layer.width * zoom,\n        height: layer.height * zoom,\n      }}\n    />\n  )\n}\nconst Layer = ({ layer }) => {\n  const zoom = 1.5\n  return (\n    <div style={{\n      position: 'absolute',\n      width: layer.width * zoom,\n      height: layer.height * zoom,\n      top: layer.top * zoom,\n      left: layer.left * zoom,\n    }}>\n      {{\n        'image': <ImageLayer layer={layer} />,\n        'video': <VideoLayer layer={layer} />,\n        'text': <TextPlayer layer={layer} />,\n        'time': <TimePlayer layer={layer} />\n      }[layer.data.type]}\n    </div>\n  )\n}\nexport default ({ isDialogOpen, setDialogOpen, layers, board }) => {\n  return (\n    <Dialog\n      open={isDialogOpen}\n      onClose={() => setDialogOpen(false)}\n      fullScreen\n    >\n      <div\n        style={{\n          width: '100%',\n          height: '100%',\n          position: 'relative',\n          background: board.background.type === 'color'\n            ? board.background.color\n            : board.background.imageId === 0\n              ? board.background.color\n              : `no-repeat center/100% url(./assets/images/${board.background.imageId}.jpg)`\n        }}>\n        {\n          layers.map(layer => <Layer key={layer.id} layer={layer} />)\n        }\n        <IconButton onClick={() => setDialogOpen(false)} >\n          <CloseIcon />\n        </IconButton>\n      </div>\n    </Dialog>\n  )\n}","import React from 'react'\nimport {\n  Button,\n} from '@material-ui/core'\nimport Player from './Player'\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport SystemUpdateAlt from '@material-ui/icons/SystemUpdateAlt';\nimport moment from 'moment'\nexport default ({ layers, board, setLayers, setBoard }) => {\n  const [isDialogOpen, setDialogOpen] = React.useState(false)\n  const exportJsonFile = () => {\n    let json = {\n      layers,\n      board\n    };\n    let dataStr = JSON.stringify(json);\n    let dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);\n\n    let linkElement = document.createElement('a');\n    linkElement.setAttribute('href', dataUri);\n    linkElement.setAttribute('download', `content_${moment().unix()}.json`);\n    linkElement.click();\n  }\n  const importJsonFile = () => {\n    let inputElement = document.createElement('input');\n    inputElement.setAttribute('type', 'file');\n    inputElement.setAttribute('accept', 'application/json');\n    inputElement.click();\n\n    inputElement.onchange = function (evt) {\n      let files = evt.target.files;\n      let file = files[0];\n      let reader = new FileReader();\n      reader.onload = async (event) => {\n        const jsonData = await JSON.parse(event.target.result)\n        console.log(jsonData)\n        setLayers([...jsonData.layers])\n        setBoard({ ...jsonData.board })\n        setDialogOpen(true)\n      };\n      reader.readAsText(file);\n    }\n  }\n  return (\n    <div style={{\n      height: 80,\n      backgroundColor: '#f1f3f7',\n      display: 'flex',\n      alignItems: 'center',\n      padding: '0 20px'\n    }}>\n      <h1>Content Editor</h1>\n      <a href=\"https://github.com/MuJungHo/web-signage\" style={{ marginLeft: 20 }}>\n        <img src=\"./assets/github.png\" style={{ width: 21, height: 21, borderRadius: '50%' }} />\n      </a>\n      <div style={{ flex: 1 }}></div>\n      <Button style={{ marginRight: 20 }} variant=\"contained\" color=\"primary\" onClick={importJsonFile}><SystemUpdateAlt style={{ marginRight: 10 }} />Upload</Button>\n      <Button style={{ marginRight: 20 }} variant=\"contained\" color=\"primary\" onClick={exportJsonFile}><SystemUpdateAlt style={{ marginRight: 10 }} />Export</Button>\n      <Button variant=\"contained\" color=\"primary\" onClick={() => setDialogOpen(true)}><PlayArrowIcon style={{ marginRight: 10 }} />Play</Button>\n      <Player isDialogOpen={isDialogOpen} setDialogOpen={setDialogOpen} layers={layers} board={board} />\n    </div>\n  )\n}","import React from 'react'\nimport Board from './components/Board'\nimport ActionBar from './components/ActionBar'\nimport ToolBar from './components/ToolBar'\nimport ControlPanel from './components/ControlPanel'\nimport Header from './components/Header'\nimport moment from 'moment'\nconst style = { margin: 'auto', display: 'flex', alignItems: 'center', width: '100%' }\nexport default () => {\n  const dropRef = React.useRef()\n  const [layers, setLayers] = React.useState([])\n  const [type, setType] = React.useState('')\n  const [isGrabing, setGrabing] = React.useState(false)\n  const [activeLayerID, setActiveLayerID] = React.useState()\n  const [board, setBoard] = React.useState({\n    width: window.innerWidth / 1.5,\n    height: window.innerHeight / 1.5,\n    background: {\n      type: 'color',\n      color: '#f5f5f5',\n      imageId: 0\n    }\n  })\n  const addLayer = type => {\n    const id = moment().unix()\n    setLayers([\n      ...layers,\n      {\n        id,\n        width: 100,\n        height: 100,\n        top: 0,\n        left: 0,\n        data: {\n          type,\n          id: 0,\n          value: ''\n        }\n      }])\n    setActiveLayerID(id)\n    setGrabing(false)\n  }\n  const handleDrop = e => {\n    e.preventDefault()\n    if (isGrabing) {\n      const id = moment().unix()\n      setLayers([\n        ...layers,\n        {\n          id,\n          width: 100,\n          height: 100,\n          top: greaterThanZero(e.clientY - dropRef.current.offsetTop - 80 - 50),\n          left: greaterThanZero(e.clientX - dropRef.current.offsetLeft - 50),\n          data: {\n            type,\n            id: 0,\n            value: ''\n          }\n        }])\n      setActiveLayerID(id)\n      setGrabing(false)\n    }\n  }\n  const handleDragOver = e => {\n    e.stopPropagation();\n    e.preventDefault();\n  }\n  const handleMouseDown = type => {\n    setType(type)\n    setGrabing(true)\n  }\n  const greaterThanZero = num => num < 0 ? 0 : num\n  return (\n    <div style={{\n      width: '100%',\n      height: '100vh',\n      backgroundColor: 'rgba(0, 0, 0, 0.13)'\n    }}>\n      <Header\n        layers={layers}\n        setLayers={setLayers}\n        board={board}\n        setBoard={setBoard}\n      />\n      <div\n        style={{\n          width: '100%',\n          position: 'relative',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n        }}>\n        <ToolBar addLayer={addLayer} handleMouseDown={handleMouseDown} />\n        <div\n          style={{ flex: 1, padding: 20, display: 'flex', flexDirection: 'column', alignItems: 'center', height: 'calc(100vh - 80px)' }}>\n          <ActionBar\n            layers={layers}\n            setLayers={setLayers}\n            activeLayerID={activeLayerID}\n            setActiveLayerID={setActiveLayerID}\n          />\n          <div\n            ref={dropRef}\n            droppable='true'\n            onDrop={handleDrop}\n            onDragOver={handleDragOver}\n            style={style}\n          >\n            <Board\n              board={board}\n              layers={layers}\n              setLayers={setLayers}\n              activeLayerID={activeLayerID}\n              setActiveLayerID={setActiveLayerID}\n            />\n          </div>\n        </div>\n        <ControlPanel\n          board={board}\n          setBoard={setBoard}\n          layers={layers}\n          setLayers={setLayers}\n          activeLayerID={activeLayerID}\n        />\n      </div>\n    </div>\n  )\n}","import React from 'react'\nimport Editor from \"./Editor\"\nimport \"./style/normalize.css\"\n\nconst App = () => (\n  <Editor />\n)\n\nexport default App\n","import 'react-app-polyfill/ie11'\nimport React from 'react'\nimport { render } from 'react-dom'\nimport App from './App'\n\nrender(<App />,document.getElementById('root'))\n"],"sourceRoot":""}